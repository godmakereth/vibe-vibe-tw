---
title: "3.2.1 積木的插槽怎麼設計——Props 類型定義：接口設計與默認值"
typora-root-url: ../../public
---

# 3.2.1 積木的插槽怎麼設計——Props 類型定義

### 一句話破題

Props 是組件的"接口契約"，定義了外部可以傳入什麼數據、什麼格式、是否必填。

### 核心價值

好的 Props 設計讓組件既靈活又安全。TypeScript 的類型系統能在編譯時捕獲錯誤，讓 AI 生成的代碼更可靠，也讓你在 Review 時更有把握。

### Props 基礎

**定義組件 Props：**

```tsx
// 方式一：interface（推薦）
interface ButtonProps {
  label: string           // 必填
  variant?: 'primary' | 'secondary'  // 可選，聯合類型
  disabled?: boolean      // 可選
  onClick?: () => void    // 可選，回調函數
}

// 方式二：type
type ButtonProps = {
  label: string
  variant?: 'primary' | 'secondary'
}

// 使用 Props
function Button({ label, variant = 'primary', disabled = false, onClick }: ButtonProps) {
  return (
    <button 
      className={`btn-${variant}`}
      disabled={disabled}
      onClick={onClick}
    >
      {label}
    </button>
  )
}
```

### 默認值設置

**兩種方式設置默認值：**

```tsx
// 方式一：解構時設置（推薦）
function Card({ title, size = 'medium' }: CardProps) {
  // ...
}

// 方式二：defaultProps（不推薦，已過時）
Card.defaultProps = {
  size: 'medium'
}
```

### children Props

`children` 是特殊的 prop，用於傳遞嵌套內容：

```tsx
interface CardProps {
  title: string
  children: React.ReactNode  // 可以是任何可渲染內容
}

function Card({ title, children }: CardProps) {
  return (
    <div className="card">
      <h2>{title}</h2>
      <div className="card-body">{children}</div>
    </div>
  )
}

// 使用
<Card title="用戶信息">
  <p>姓名：張三</p>
  <p>年齡：25</p>
</Card>
```

### 常用 Props 類型

| 類型 | 用途 | 示例 |
|------|------|------|
| `string` | 文本 | `title: string` |
| `number` | 數值 | `count: number` |
| `boolean` | 開關 | `disabled?: boolean` |
| `'a' \| 'b'` | 枚舉值 | `size: 'sm' \| 'md' \| 'lg'` |
| `() => void` | 無參回調 | `onClick: () => void` |
| `(value: T) => void` | 帶參回調 | `onChange: (value: string) => void` |
| `React.ReactNode` | 可渲染內容 | `children: React.ReactNode` |
| `React.CSSProperties` | 內聯樣式 | `style?: React.CSSProperties` |
| `React.ComponentProps<'button'>` | 繼承原生屬性 | 繼承 button 所有屬性 |

### 繼承原生元素屬性

當你的組件是對原生元素的包裝時：

```tsx
// 繼承 button 的所有原生屬性
interface ButtonProps extends React.ComponentProps<'button'> {
  variant?: 'primary' | 'secondary'
}

function Button({ variant = 'primary', children, ...rest }: ButtonProps) {
  return (
    <button className={`btn-${variant}`} {...rest}>
      {children}
    </button>
  )
}

// 現在可以使用所有原生 button 屬性
<Button variant="primary" type="submit" disabled>
  提交
</Button>
```

### 泛型 Props

處理通用組件時使用泛型：

```tsx
interface ListProps<T> {
  items: T[]
  renderItem: (item: T) => React.ReactNode
}

function List<T>({ items, renderItem }: ListProps<T>) {
  return (
    <ul>
      {items.map((item, index) => (
        <li key={index}>{renderItem(item)}</li>
      ))}
    </ul>
  )
}

// 使用時自動推斷類型
<List 
  items={[{ id: 1, name: '張三' }]} 
  renderItem={(user) => <span>{user.name}</span>}  // user 自動推斷爲 { id: number, name: string }
/>
```

### AI 協作指南

**核心意圖**：讓 AI 幫你設計類型安全的組件接口。

**需求定義公式**：
- 功能描述：組件需要接收 [數據列表]
- 交互方式：用戶可以 [觸發事件]
- 預期效果：組件根據 props 展示 [不同狀態]

**關鍵術語**：`interface`、`children`、`React.ReactNode`、`extends ComponentProps`、泛型

**交互策略**：
1. 先讓 AI 列出組件需要的所有 props
2. 讓它定義類型接口
3. 區分必填和可選
4. 添加合理的默認值

### 避坑指南

1. **Props 是隻讀的**：永遠不要直接修改 props，需要改變時用 state
2. **避免過度設計**：不要預設太多"以後可能用到"的 props
3. **回調命名規範**：事件回調以 `on` 開頭，如 `onClick`、`onChange`
4. **可選 props 記得設默認值**：避免 undefined 導致的問題

### 驗收清單

- [ ] Props 接口定義完整，類型準確
- [ ] 可選 props 有合理的默認值
- [ ] 使用 `children` 實現內容插槽
- [ ] 複雜組件使用泛型保持類型安全
