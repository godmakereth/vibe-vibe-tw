---
title: "3.4.2 複製粘貼就能用的組件——shadcn/ui 組件庫：安裝與使用"
typora-root-url: ../../public
---

# 3.4.2 複製粘貼就能用的組件——shadcn/ui

### 一句話破題

shadcn/ui 不是 npm 包，而是可複製到項目中的高質量組件代碼，你擁有完全控制權。

### 核心價值

傳統組件庫（如 Ant Design、MUI）是黑盒——你用它們的組件，按它們的規則定製。shadcn/ui 不同：組件代碼直接複製到你的項目中，你可以隨意修改。

### shadcn/ui vs 傳統組件庫

| 特性 | shadcn/ui | 傳統組件庫 |
|------|-----------|------------|
| 安裝方式 | 複製代碼到項目 | npm install |
| 定製性 | 完全可控 | 受限於 API |
| 更新方式 | 手動更新 | npm update |
| 體積 | 只包含使用的 | 可能引入多餘代碼 |
| 學習成本 | 低（標準 React） | 需學習特定 API |

### 快速開始

**1. 初始化**

```bash
npx shadcn@latest init
```

選擇配置：
- Style: Default
- Base color: Slate
- CSS variables: Yes

**2. 添加組件**

```bash
# 添加單個組件
npx shadcn@latest add button

# 添加多個組件
npx shadcn@latest add card input label

# 查看所有可用組件
npx shadcn@latest add
```

**3. 使用組件**

```tsx
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Input } from "@/components/ui/input"

export function LoginForm() {
  return (
    <Card className="w-[400px]">
      <CardHeader>
        <CardTitle>登錄</CardTitle>
      </CardHeader>
      <CardContent className="space-y-4">
        <Input placeholder="郵箱" type="email" />
        <Input placeholder="密碼" type="password" />
        <Button className="w-full">登錄</Button>
      </CardContent>
    </Card>
  )
}
```

### 常用組件速覽

| 組件 | 用途 | 安裝命令 |
|------|------|----------|
| `Button` | 按鈕 | `add button` |
| `Input` | 輸入框 | `add input` |
| `Card` | 卡片容器 | `add card` |
| `Dialog` | 彈窗 | `add dialog` |
| `Select` | 下拉選擇 | `add select` |
| `Table` | 表格 | `add table` |
| `Form` | 表單（含驗證） | `add form` |
| `Toast` | 提示消息 | `add toast` |

### 組件變體

shadcn/ui 組件通常提供多種變體：

```tsx
// Button 變體
<Button variant="default">默認</Button>
<Button variant="secondary">次要</Button>
<Button variant="outline">描邊</Button>
<Button variant="ghost">幽靈</Button>
<Button variant="destructive">危險</Button>

// 尺寸
<Button size="sm">小</Button>
<Button size="default">中</Button>
<Button size="lg">大</Button>
```

### 定製組件

組件代碼在 `components/ui/` 目錄下，可直接修改：

```tsx
// components/ui/button.tsx
const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium...",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        // 添加自定義變體
        brand: "bg-brand-500 text-white hover:bg-brand-600",
      },
      // ...
    },
  }
)
```

### cn() 工具函數

shadcn/ui 使用 `cn()` 合併類名：

```tsx
import { cn } from "@/lib/utils"

// 合併默認類和自定義類
<Button className={cn("w-full", isLoading && "opacity-50")}>
  提交
</Button>
```

### 表單集成

shadcn/ui 的 Form 組件與 react-hook-form 深度集成：

```bash
npx shadcn@latest add form
```

```tsx
import { useForm } from "react-hook-form"
import { zodResolver } from "@hookform/resolvers/zod"
import { z } from "zod"
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from "@/components/ui/form"

const formSchema = z.object({
  email: z.string().email("請輸入有效的郵箱"),
  password: z.string().min(6, "密碼至少6位"),
})

export function LoginForm() {
  const form = useForm<z.infer<typeof formSchema>>({
    resolver: zodResolver(formSchema),
  })

  function onSubmit(values: z.infer<typeof formSchema>) {
    console.log(values)
  }

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
        <FormField
          control={form.control}
          name="email"
          render={({ field }) => (
            <FormItem>
              <FormLabel>郵箱</FormLabel>
              <FormControl>
                <Input placeholder="your@email.com" {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <Button type="submit">登錄</Button>
      </form>
    </Form>
  )
}
```

### AI 協作指南

**核心意圖**：讓 AI 使用 shadcn/ui 組件構建 UI。

**需求定義公式**：
- 功能描述：我需要一個 [功能] 界面
- 組件要求：使用 shadcn/ui 的 [組件列表]
- 樣式要求：[額外的 Tailwind 類]

**關鍵術語**：`shadcn/ui`、`variant`、`cn()`、`Form`、`react-hook-form`

**交互策略**：
1. 先確認需要哪些 shadcn 組件
2. 讓 AI 生成使用這些組件的代碼
3. 如需表單驗證，指定使用 Form + zod

### 避坑指南

1. **先安裝再使用**：組件不會自動安裝，需要手動 `add`
2. **路徑別名**：確保 `@/components/ui` 路徑正確配置
3. **依賴關係**：某些組件依賴其他組件，會自動一起安裝
4. **暗色模式**：需要在 `layout.tsx` 中配置 ThemeProvider

### 驗收清單

- [ ] 組件正確安裝到 `components/ui/`
- [ ] 導入路徑使用 `@/components/ui/xxx`
- [ ] 使用 `cn()` 合併額外的類名
- [ ] 表單使用 Form 組件並配置驗證
