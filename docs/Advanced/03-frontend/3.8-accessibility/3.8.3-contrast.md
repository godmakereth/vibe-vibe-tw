---
title: "3.8.3 色盲用戶能看清嗎——顏色對比度：視覺障礙用戶的友好設計"
typora-root-url: ../../public
---

# 3.8.3 顏色對比度

### 一句話破題

足夠的對比度讓所有人都能看清你的內容，包括在陽光下看手機的普通用戶。

### 核心價值

低對比度的文字讓視力正常的人在光線不好時也難以閱讀。WCAG 規定了最低對比度要求，滿足它對所有用戶都有益。

### WCAG 對比度要求

| 級別 | 普通文字 | 大字/粗體 | 說明 |
|-----|---------|---------|-----|
| AA | 4.5:1 | 3:1 | 最低要求 |
| AAA | 7:1 | 4.5:1 | 更高標準 |

**大字定義**：18pt (24px) 以上，或 14pt (18.5px) 加粗

### 對比度計算工具

```tsx
// 對比度計算函數
function getLuminance(r: number, g: number, b: number): number {
  const [rs, gs, bs] = [r, g, b].map((c) => {
    c = c / 255
    return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4)
  })
  return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs
}

function getContrastRatio(color1: string, color2: string): number {
  const rgb1 = hexToRgb(color1)
  const rgb2 = hexToRgb(color2)
  
  const l1 = getLuminance(rgb1.r, rgb1.g, rgb1.b)
  const l2 = getLuminance(rgb2.r, rgb2.g, rgb2.b)
  
  const lighter = Math.max(l1, l2)
  const darker = Math.min(l1, l2)
  
  return (lighter + 0.05) / (darker + 0.05)
}

function hexToRgb(hex: string) {
  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex)
  return result ? {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16),
  } : { r: 0, g: 0, b: 0 }
}

// 使用
const ratio = getContrastRatio('#3B82F6', '#FFFFFF')
console.log(`對比度: ${ratio.toFixed(2)}:1`) // 4.51:1
```

### 常見問題配色

| 問題 | 差的配色 | 好的配色 |
|-----|---------|---------|
| 灰色文字 | `#999` on `#fff` (2.85:1) | `#666` on `#fff` (5.74:1) |
| 藍色鏈接 | `#60A5FA` on `#fff` (2.77:1) | `#2563EB` on `#fff` (4.88:1) |
| 成功色 | `#22C55E` on `#fff` (2.43:1) | `#15803D` on `#fff` (4.96:1) |

### 安全配色方案

```css
:root {
  /* 確保滿足 AA 標準的配色 */
  
  /* 文字顏色 */
  --text-primary: #111827;     /* on white: 16.02:1 */
  --text-secondary: #4B5563;   /* on white: 7.50:1 */
  --text-muted: #6B7280;       /* on white: 5.24:1 */
  
  /* 按鈕顏色 */
  --btn-primary: #2563EB;      /* white text: 4.88:1 */
  --btn-success: #15803D;      /* white text: 4.96:1 */
  --btn-danger: #DC2626;       /* white text: 4.51:1 */
  
  /* 鏈接 */
  --link-color: #1D4ED8;       /* on white: 6.95:1 */
}
```

### 不只依賴顏色

色盲用戶可能無法區分紅/綠，所以不要只用顏色傳達信息：

```tsx
// 差：只用顏色區分狀態
<span className="text-green-500">成功</span>
<span className="text-red-500">失敗</span>

// 好：顏色 + 圖標
<span className="text-green-600 flex items-center">
  <CheckIcon className="w-4 h-4 mr-1" />
  成功
</span>
<span className="text-red-600 flex items-center">
  <XIcon className="w-4 h-4 mr-1" />
  失敗
</span>

// 表單錯誤：顏色 + 圖標 + 位置
<div>
  <input 
    className={cn(
      "border rounded",
      error ? "border-red-500" : "border-gray-300"
    )}
    aria-invalid={!!error}
    aria-describedby={error ? "email-error" : undefined}
  />
  {error && (
    <p id="email-error" className="text-red-600 text-sm mt-1 flex items-center">
      <AlertCircle className="w-4 h-4 mr-1" />
      {error}
    </p>
  )}
</div>
```

### 圖表可訪問性

```tsx
// 差：只用顏色區分數據系列
<LineChart data={data}>
  <Line stroke="#3B82F6" />
  <Line stroke="#10B981" />
  <Line stroke="#F59E0B" />
</LineChart>

// 好：顏色 + 形狀/線型
<LineChart data={data}>
  <Line 
    stroke="#3B82F6" 
    strokeDasharray="none"
    dot={{ shape: 'circle' }}
  />
  <Line 
    stroke="#10B981" 
    strokeDasharray="5 5"
    dot={{ shape: 'square' }}
  />
  <Line 
    stroke="#F59E0B" 
    strokeDasharray="10 3"
    dot={{ shape: 'triangle' }}
  />
  <Legend />
</LineChart>
```

### 焦點狀態對比度

```css
/* 焦點輪廓需要足夠對比度 */
:focus-visible {
  outline: 2px solid #2563EB;
  outline-offset: 2px;
}

/* 在深色背景上 */
.dark :focus-visible {
  outline: 2px solid #60A5FA;
}

/* 高對比度模式 */
@media (prefers-contrast: high) {
  :focus-visible {
    outline: 3px solid currentColor;
  }
}
```

### 檢測工具使用

```tsx
// Chrome DevTools 檢測
// 1. 打開 DevTools
// 2. Elements 面板選擇元素
// 3. Styles 面板點擊顏色值
// 4. 查看 Contrast ratio

// Lighthouse 審計
// 1. DevTools > Lighthouse
// 2. 勾選 Accessibility
// 3. 運行審計

// axe DevTools
// 1. 安裝 axe DevTools 擴展
// 2. DevTools > axe DevTools
// 3. 掃描頁面
```

### 暗色模式對比度

```css
/* 暗色模式同樣需要滿足對比度要求 */
[data-theme="dark"] {
  --background: #111827;
  --foreground: #F9FAFB;        /* on dark: 15.37:1 */
  --muted: #9CA3AF;             /* on dark: 7.35:1 */
  
  /* 避免純黑背景 + 純白文字（對比度太高也不舒服） */
  /* 避免深灰背景 + 淺灰文字（對比度不足） */
}
```

### AI 協作指南

**核心意圖**：讓 AI 幫你檢查和優化顏色對比度。

**需求定義公式**：
- 檢查內容：[配色方案/特定組件]
- 目標級別：WCAG [AA/AAA]
- 背景顏色：[亮色/暗色/都要]

**示例 Prompt**：

```
請檢查我的配色方案是否滿足 WCAG AA 標準：
背景: #FFFFFF
主要文字: #374151
次要文字: #9CA3AF
鏈接: #3B82F6
按鈕: #2563EB (白色文字)
如果不滿足，請提供替代顏色
```

### 驗收清單

- [ ] 文字對比度達到 4.5:1 (AA)
- [ ] 大字對比度達到 3:1
- [ ] 不只依賴顏色傳達信息
- [ ] 焦點狀態清晰可見
- [ ] 暗色模式對比度達標
