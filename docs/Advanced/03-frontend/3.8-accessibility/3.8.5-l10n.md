---
title: "3.8.5 翻譯得接地氣嗎——本地化：l10n 文化適配與地區差異"
typora-root-url: ../../public
---

# 3.8.5 本地化 l10n

### 一句話破題

本地化不只是翻譯文字，還要適配日期、貨幣、習慣，甚至顏色的文化含義。

### 核心價值

本地化 (l10n = localization) 是讓產品適應特定地區的文化、法規和用戶習慣。直接翻譯可能產生文化衝突或誤解。

### 本地化 vs 國際化

| 概念 | 範圍 | 示例 |
|-----|------|-----|
| 國際化 (i18n) | 技術架構 | 文本外置、格式化函數 |
| 本地化 (l10n) | 內容適配 | 翻譯、文化調整、法規遵從 |

### 日期和時間格式

```tsx
const date = new Date('2024-01-15T14:30:00')

// 不同地區格式差異巨大
const formats = {
  'zh-CN': '2024年1月15日 14:30',      // 年月日，24小時制
  'en-US': 'January 15, 2024, 2:30 PM', // 月日年，12小時制
  'de-DE': '15. Januar 2024, 14:30',    // 日.月.年
  'ja-JP': '2024年1月15日 14:30',       // 同中國
}

// 使用 Intl.DateTimeFormat
function formatDate(date: Date, locale: string) {
  return new Intl.DateTimeFormat(locale, {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit',
  }).format(date)
}
```

### 貨幣和數字

```tsx
// 貨幣符號位置和小數位數
const amount = 1234.56

const currencies = {
  'zh-CN': '￥1,234.56',
  'en-US': '$1,234.56',
  'de-DE': '1.234,56 €',  // 注意：逗號和點的用法相反
  'ja-JP': '￥1,235',      // 日元無小數
}

function formatCurrency(amount: number, locale: string, currency: string) {
  return new Intl.NumberFormat(locale, {
    style: 'currency',
    currency,
  }).format(amount)
}

// 使用
formatCurrency(1234.56, 'zh-CN', 'CNY') // ￥1,234.56
formatCurrency(1234.56, 'en-US', 'USD') // $1,234.56
formatCurrency(1234.56, 'de-DE', 'EUR') // 1.234,56 €
```

### 地址格式

```tsx
// 地址組件順序因地區而異
interface Address {
  street: string
  city: string
  state: string
  postalCode: string
  country: string
}

// 中國：國家 省 市 區 街道
// 美國：街道, 城市, 州 郵編
// 日本：郵編 縣 市 區 街道

function formatAddress(address: Address, locale: string): string {
  switch (locale) {
    case 'zh-CN':
      return `${address.country}${address.state}${address.city}${address.street}`
    case 'en-US':
      return `${address.street}, ${address.city}, ${address.state} ${address.postalCode}`
    case 'ja-JP':
      return `〒${address.postalCode} ${address.state}${address.city}${address.street}`
    default:
      return `${address.street}, ${address.city}`
  }
}
```

### 姓名順序

```tsx
interface Name {
  firstName: string
  lastName: string
}

// 西方：firstName lastName
// 中日韓：lastName firstName

function formatName(name: Name, locale: string): string {
  const eastAsianLocales = ['zh-CN', 'zh-TW', 'ja-JP', 'ko-KR']
  
  if (eastAsianLocales.includes(locale)) {
    return `${name.lastName}${name.firstName}`
  }
  return `${name.firstName} ${name.lastName}`
}
```

### 顏色的文化含義

| 顏色 | 中國 | 西方 | 日本 |
|-----|------|-----|-----|
| 紅色 | 喜慶、好運 | 危險、警告 | 生命、熱情 |
| 白色 | 喪事 | 純潔、婚禮 | 純潔 |
| 綠色 | 環保、健康 | 安全、金錢 | 自然 |
| 黃色 | 皇家、高貴 | 警告、懦弱 | 勇氣 |

```tsx
// 根據地區調整狀態顏色
const statusColors = {
  'zh-CN': {
    success: 'text-red-500',    // 紅色更積極
    error: 'text-gray-500',
  },
  'en-US': {
    success: 'text-green-500',
    error: 'text-red-500',
  },
}
```

### 文本長度適配

```tsx
// 翻譯後文本長度可能差異很大
const translations = {
  'submit': {
    'zh-CN': '提交',        // 2字符
    'en-US': 'Submit',      // 6字符
    'de-DE': 'Einreichen',  // 10字符
  },
}

// 設計時考慮文本膨脹
// 按鈕使用 min-width 而非固定寬度
<button className="min-w-[80px] px-4">
  {t('submit')}
</button>

// 使用彈性佈局
<div className="flex flex-wrap gap-2">
  <button>{t('save')}</button>
  <button>{t('cancel')}</button>
</div>
```

### RTL 語言支持

```tsx
// 阿拉伯語、希伯來語從右到左閱讀

// 使用邏輯屬性
.container {
  /* 物理屬性 - RTL 需要翻轉 */
  margin-left: 1rem;  /* 不推薦 */
  
  /* 邏輯屬性 - 自動適應 */
  margin-inline-start: 1rem;  /* 推薦 */
}

// Tailwind 邏輯屬性
<div className="ms-4 me-2">  {/* margin-inline-start/end */}
  <p className="text-start">內容</p>  {/* 自動適應方向 */}
</div>

// HTML dir 屬性
<html lang="ar" dir="rtl">
  ...
</html>
```

### 法規合規

```tsx
// GDPR (歐盟) - 需要 cookie 同意
// CCPA (加州) - 需要"不要出售我的信息"鏈接
// 中國 - 需要 ICP 備案號

function Footer({ locale }: { locale: string }) {
  return (
    <footer>
      {locale.startsWith('zh') && (
        <p>ICP備案號: 京ICP備XXXXXXXX號</p>
      )}
      {['en-US', 'en-GB', 'de-DE', 'fr-FR'].includes(locale) && (
        <CookieConsent />
      )}
      {locale === 'en-US' && (
        <a href="/ccpa">Do Not Sell My Personal Information</a>
      )}
    </footer>
  )
}
```

### 本地化測試

```tsx
// 僞本地化測試 - 用特殊字符替換
// 快速發現硬編碼文本和佈局問題

function pseudoLocalize(text: string): string {
  const map: Record<string, string> = {
    'a': 'å', 'b': 'ƀ', 'c': 'ç', 'd': 'ð',
    'e': 'é', 'f': 'ƒ', 'g': 'ğ', 'h': 'ĥ',
    // ...
  }
  
  return '[[ ' + text.split('').map(c => map[c.toLowerCase()] || c).join('') + ' ]]'
}

// "Hello" → "[[ ĥéļļö ]]"
// 容易發現：
// 1. 硬編碼文本（沒有被替換）
// 2. 文本截斷問題（加長了字符串）
// 3. 編碼問題（特殊字符顯示異常）
```

### AI 協作指南

**核心意圖**：讓 AI 幫你處理本地化細節。

**需求定義公式**：
- 目標市場：[國家/地區列表]
- 內容類型：[日期/貨幣/地址/姓名]
- 特殊要求：[法規合規/RTL 支持]

**示例 Prompt**：

```
我的產品需要支持中國和美國市場，請幫我：
1. 設計日期和貨幣格式化工具函數
2. 創建地址和姓名格式化函數
3. 列出兩個市場的法規差異需要注意的點
4. 提供按鈕和表單的多語言長度適配方案
```

### 驗收清單

- [ ] 日期/時間按地區格式化
- [ ] 貨幣按地區顯示
- [ ] 地址/姓名順序正確
- [ ] 佈局適應文本長度變化
- [ ] RTL 語言正確顯示
- [ ] 符合目標地區法規
