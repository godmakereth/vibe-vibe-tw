---
title: "8.1.1 後悔藥怎麼喫——Git 基礎命令：add/commit/push/pull"
typora-root-url: ../../public
---

# 8.1.1 後悔藥怎麼喫——Git 基礎命令

Git 的四個核心命令——add、commit、push、pull——構成了日常開發的基本操作閉環。

## 核心概念：三個區域

```mermaid
flowchart LR
    A[工作區<br/>Working Directory] -->|git add| B[暫存區<br/>Staging Area]
    B -->|git commit| C[本地倉庫<br/>Local Repository]
    C -->|git push| D[遠程倉庫<br/>Remote Repository]
    D -->|git pull| A
```

| 區域 | 說明 | 類比 |
|------|------|------|
| 工作區 | 你正在編輯的文件 | 草稿紙 |
| 暫存區 | 準備提交的變更 | 購物車 |
| 本地倉庫 | 已提交的版本歷史 | 個人存檔 |
| 遠程倉庫 | 團隊共享的代碼庫 | 雲端備份 |

## 四大核心命令

### 1. git add：將變更加入暫存區

```bash
# 添加單個文件
git add src/index.ts

# 添加所有變更
git add .

# 添加特定類型文件
git add "*.tsx"

# 交互式添加（逐個確認）
git add -p
```

**注意**：`git add .` 會添加當前目錄下所有變更，確保 `.gitignore` 配置正確。

### 2. git commit：創建版本快照

```bash
# 提交併附帶消息
git commit -m "feat: 添加用戶登錄功能"

# 添加並提交（跳過 add）
git commit -am "fix: 修復登錄驗證問題"

# 修改上一次提交
git commit --amend -m "feat: 添加用戶登錄功能（含驗證）"
```

**最佳實踐**：
- 每次提交應該是一個"邏輯完整"的變更
- 提交信息遵循 Conventional Commits 規範
- 避免提交未完成或有明顯錯誤的代碼

### 3. git push：推送到遠程倉庫

```bash
# 推送當前分支
git push

# 首次推送新分支
git push -u origin feat/login

# 強制推送（慎用！）
git push --force
```

**警告**：`--force` 會覆蓋遠程歷史，只在自己獨佔的分支上使用。

### 4. git pull：拉取遠程更新

```bash
# 拉取併合並
git pull

# 拉取並變基（保持提交歷史線性）
git pull --rebase

# 只獲取不合並
git fetch
```

**推薦**：使用 `git pull --rebase` 可以保持提交歷史整潔。

## 常用輔助命令

```bash
# 查看當前狀態
git status

# 查看變更內容
git diff

# 查看提交歷史
git log --oneline -10

# 查看遠程倉庫信息
git remote -v
```

## 典型工作流程

```bash
# 1. 開始工作前，拉取最新代碼
git pull --rebase

# 2. 進行開發...

# 3. 查看變更
git status
git diff

# 4. 添加變更到暫存區
git add .

# 5. 提交變更
git commit -m "feat: 完成用戶註冊頁面"

# 6. 推送到遠程
git push
```

## AI 協作指南

向 AI 描述 Git 操作需求時，說明：
- 你想完成什麼操作（如"撤銷上次提交"）
- 當前狀態（是否已推送、是否有未提交變更）
- 是否需要保留變更內容

**示例 Prompt**：
> "我剛提交了一個 commit 但還沒 push，發現漏了一個文件，如何把這個文件補充到上一次提交中？"

## 避坑指南

| 問題 | 原因 | 解決方案 |
|------|------|----------|
| push 被拒絕 | 遠程有新提交 | 先 `git pull --rebase` |
| 提交了敏感文件 | .gitignore 未配置 | 使用 `git rm --cached` 移除 |
| commit 信息寫錯 | 手誤 | `git commit --amend` 修改 |
| 誤刪文件 | 操作失誤 | `git checkout -- filename` 恢復 |
