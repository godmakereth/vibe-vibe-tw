---
title: "11.1.3 打個標籤好記錄——Git Tag：版本標記與發佈點"
typora-root-url: ../../public
---

# 11.1.3 Git Tag：版本標記與發佈點

## 一句話破題

**Git Tag** 是給特定提交打上永久標籤的方式，用於標記發佈版本，方便後續查找和回滾。

## 核心價值

使用 Git Tag 能讓你：
- 精確定位每個發佈版本的代碼狀態
- 快速回滾到任意歷史版本
- 觸發 CI/CD 自動發佈流程

## 兩種 Tag 類型

| 類型 | 命令 | 適用場景 |
|------|------|----------|
| 輕量標籤 | `git tag v1.0.0` | 臨時標記 |
| 附註標籤 | `git tag -a v1.0.0 -m "..."` | 正式發佈 |

## 快速上手

### 創建標籤

```bash
# 創建附註標籤（推薦用於發佈）
git tag -a v1.2.0 -m "Release version 1.2.0"

# 創建輕量標籤
git tag v1.2.0

# 給歷史提交打標籤
git tag -a v1.1.0 abc1234 -m "Release version 1.1.0"
```

### 查看標籤

```bash
# 列出所有標籤
git tag

# 按模式過濾
git tag -l "v1.*"

# 查看標籤詳情
git show v1.2.0
```

### 推送標籤到遠程

```bash
# 推送單個標籤
git push origin v1.2.0

# 推送所有標籤
git push origin --tags

# 推送所有附註標籤
git push origin --follow-tags
```

### 刪除標籤

```bash
# 刪除本地標籤
git tag -d v1.2.0

# 刪除遠程標籤
git push origin --delete v1.2.0
```

## 基於 Tag 的操作

### 檢出特定版本

```bash
# 檢出到特定標籤（分離 HEAD 狀態）
git checkout v1.2.0

# 基於標籤創建新分支
git checkout -b hotfix/v1.2.1 v1.2.0
```

### 查看版本間差異

```bash
# 比較兩個版本
git diff v1.1.0 v1.2.0

# 查看版本間的提交
git log v1.1.0..v1.2.0 --oneline
```

## Tag 命名規範

```
v1.2.3          # 標準版本
v1.2.3-alpha.1  # Alpha 預發佈
v1.2.3-beta.1   # Beta 預發佈
v1.2.3-rc.1     # Release Candidate
```

## 配合 CI/CD 使用

GitHub Actions 可以監聽 Tag 推送來觸發發佈：

```yaml
# .github/workflows/release.yml
name: Release

on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Get version
        run: echo "VERSION=${GITHUB_REF#refs/tags/v}" >> $GITHUB_ENV
      - name: Build and deploy
        run: |
          echo "Deploying version $VERSION"
```

## 避坑指南

::: danger 新手最容易犯的錯
1. 忘記推送標籤到遠程倉庫
2. 使用輕量標籤進行正式發佈（缺少元信息）
3. 在錯誤的提交上打標籤
4. 修改已推送的標籤（破壞歷史記錄）
:::
