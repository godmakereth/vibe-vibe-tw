---
title: "1.5.3 數據倉庫怎麼選——數據庫選擇：PostgreSQL vs MySQL vs SQLite"
typora-root-url: ../../public
---

# 1.5.3 數據倉庫怎麼選——數據庫選擇：PostgreSQL vs MySQL vs SQLite

### 一句話破題

數據庫是應用的"記憶"——選對數據庫，決定了數據存儲的可靠性、查詢的效率、以及未來的擴展能力。

### 三大數據庫對比

| 特性 | PostgreSQL | MySQL | SQLite |
|------|------------|-------|--------|
| **類型** | 關係型數據庫 | 關係型數據庫 | 嵌入式數據庫 |
| **部署** | 需要服務器 | 需要服務器 | 文件即數據庫 |
| **併發** | 優秀 | 良好 | 受限 |
| **功能** | 最豐富 | 夠用 | 基礎 |
| **學習成本** | 中等 | 低 | 最低 |
| **適用場景** | 生產環境 | 生產環境 | 開發/小型應用 |

### 推薦選擇

```mermaid
graph TD
    A["選擇數據庫"] --> B{"項目階段?"}
    B -- "開發/學習" --> C["SQLite"]
    B -- "生產環境" --> D{"團隊經驗?"}
    D -- "有 MySQL 經驗" --> E["MySQL"]
    D -- "其他情況" --> F["PostgreSQL"]
```

**本課程推薦**：

- **開發環境**：SQLite（零配置，方便本地開發）
- **生產環境**：PostgreSQL（功能強大，與 Prisma 配合最佳）

### PostgreSQL 優勢

1. **JSON 支持**：原生支持 JSON/JSONB 類型，適合存儲靈活結構的數據
2. **豐富的數據類型**：數組、範圍類型、全文搜索等
3. **強大的擴展**：PostGIS（地理信息）、TimescaleDB（時序數據）
4. **行級安全**：內置 RLS（Row Level Security），適合多租戶應用
5. **與 Prisma 配合**：Prisma 對 PostgreSQL 的支持最完善

### 快速上手 PostgreSQL

#### 本地安裝（開發環境）

**方式 1：Docker（推薦）**

```bash
docker run --name postgres -e POSTGRES_PASSWORD=mysecretpassword -p 5432:5432 -d postgres
```

**方式 2：本地安裝**

- macOS: `brew install postgresql`
- Windows: 下載安裝包 [postgresql.org/download](https://www.postgresql.org/download/)

#### 雲服務（生產環境）

| 服務商 | 特點 | 免費額度 |
|--------|------|----------|
| **Supabase** | PostgreSQL + Auth + Storage | 500MB 數據庫 |
| **Neon** | Serverless PostgreSQL | 0.5GB 存儲 |
| **Railway** | 一鍵部署 | $5 免費額度/月 |

### Prisma 連接配置

在 `.env` 文件中配置數據庫連接：

```env
# SQLite（本地開發）
DATABASE_URL="file:./dev.db"

# PostgreSQL（生產環境）
DATABASE_URL="postgresql://user:password@localhost:5432/mydb?schema=public"
```

在 `prisma/schema.prisma` 中配置：

```prisma
datasource db {
  provider = "postgresql"  // 或 "sqlite"
  url      = env("DATABASE_URL")
}
```

### 開發到生產的切換策略

1. **本地開發**：使用 SQLite，零配置啓動
2. **測試環境**：使用 PostgreSQL Docker 容器
3. **生產環境**：使用雲服務 PostgreSQL

Prisma 會幫你處理不同數據庫之間的差異，只需要修改 `DATABASE_URL` 即可。

### 避坑指南

- **SQLite 限制**：不支持併發寫入，不適合生產環境
- **連接字符串安全**：數據庫密碼必須通過環境變量管理，不要硬編碼
- **本地 vs 雲端**：開發環境用本地數據庫，避免網絡延遲和費用
- **備份策略**：生產數據庫必須配置自動備份
