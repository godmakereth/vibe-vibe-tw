---
title: "0.6.1 像保安一樣思考——安全設計原則"
typora-root-url: ../../public
---

# 0.6.1 像保安一樣思考——安全設計原則

## 認知重構：先有底線，再談功能

安全設計不是“補漏洞”，而是從一開始就定義**最小權限**、**最小暴露**、**面向失敗**，並配套**日誌脫敏**與**安全審計**。

## 本質還原：五大原則

```mermaid
flowchart TB
    subgraph sgp ["安全五原則"]
        LP[最小權限] --> ME[最小暴露];
        ME --> FF[面向失敗];
        FF --> Mask[日誌脫敏];
        Mask --> Audit[安全審計];
    end
```

- 最小權限：用戶與服務只擁有完成任務所需的最小權限。
- 最小暴露：接口只返回必要字段，隱藏內部實現與錯誤細節。
- 面向失敗：異常默認拒絕，失敗路徑清晰且安全。
- 日誌脫敏：從日誌採集到存儲全鏈路不包含明文密鑰或個人敏感信息。
- 安全審計：定期檢查賬戶權限、依賴漏洞與暴露面。

## 落地與實戰

- 權限建模：
  - 基於角色（RBAC）或能力（ABAC）進行授權，提供默認“最小角色”。
  - 管理後臺與 API 分離權限域，避免越權調用。
- 接口設計：
  - 輸出白名單（允許返回的字段清單）而非黑名單。
  - 失敗返回統一 `錯誤碼 + 簡短信息`，不暴露堆棧與內部路徑。
- 異常處理：
  - 超時/網絡錯誤/依賴不可用時，走降級或拒絕策略。
  - 所有失敗路徑均記錄審計日誌（已脫敏），便於回溯。
- 日誌脫敏：
  - 遮罩策略：只保留必要的後四位，如 `****5678`。
  - 禁止輸出：密鑰、令牌、密碼、身份證、銀行卡全鏈路禁止明文。
- 安全審計：
  - 賬戶與權限：每月審查，離職清退，臨時權限自動過期。
  - 漏洞掃描：依賴與鏡像每週掃描；高危立即升級或替換。

## 驗收清單

- 權限：默認最小角色，無越權路徑；敏感操作需二次確認。
- 暴露：所有接口均有字段白名單；錯誤體無內部細節。
- 失敗：異常默認拒絕；降級與熔斷可控。
- 日誌：關鍵字段遮罩；密鑰與個人信息不入日誌。
- 審計：定期掃描與報告；整改閉環與覆盤記錄。

## AI 協作指南

- 核心意圖：讓 AI 根據業務場景產出**原則驅動**的方案與驗收清單。
- 需求定義公式：
  - “爲用戶中心設計 RBAC 權限模型、接口字段白名單與日誌脫敏策略，輸出驗收清單與失敗路徑處理。”
- 關鍵術語：`RBAC`, `ABAC`, `白名單`, `熔斷`, `降級`, `審計日誌`。
