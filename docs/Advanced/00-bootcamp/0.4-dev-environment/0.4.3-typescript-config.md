---
title: "0.4.3 給 JS 代碼請個語法保鏢——TypeScript 配置與最佳實踐"
typora-root-url: ../../public
---

# 0.4.3 給 JS 代碼請個語法保鏢——TypeScript 配置與最佳實踐

## 一句話破題

TypeScript 讓“運行時報錯”變成“編譯時報錯”。用對 `tsconfig.json`，讓類型系統成爲你的守門員。

## tsconfig.json 配置詳解

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "Node",
    "strict": true,
    "noImplicitAny": true,
    "noImplicitReturns": true,
    "forceConsistentCasingInFileNames": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "baseUrl": "./",
    "paths": {
      "@src/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@lib/*": ["src/lib/*"]
    },
    "outDir": "dist"
  },
  "include": ["src"],
  "exclude": ["node_modules", "dist"]
}
```

## 嚴格模式配置

- `strict`: 開啓所有嚴格檢查。
- `noImplicitAny`: 禁止隱式 `any`；顯式類型聲明與推斷結合。
- `noImplicitReturns`: 函數必須在所有分支返回值。

## 模塊解析與路徑別名

- `baseUrl`: 設定解析基準目錄。
- `paths`: 定義別名映射，減少相對路徑。

### 示例：使用別名導入

```ts
import { Button } from '@components/Button'
import { createClient } from '@lib/client'

type User = {
  id: string
  name: string
}

function getDisplayName(u: User): string {
  return u.name
}
```

## 類型聲明文件管理

- 社區類型：`npm i -D @types/node @types/react @types/react-dom`
- 自定義聲明：在 `src/types/global.d.ts` 中聲明全局類型。

```ts
declare global {
  interface EnvConfig {
    API_BASE: string
    ENV: 'development' | 'production' | 'test'
  }
}

export {}
```

## AI 協作指南

- 核心意圖：讓 AI 根據項目架構生成**嚴格模式**的 `tsconfig.json` 與**別名方案**。
- 需求定義公式：
  - “生成一個嚴格模式的 `tsconfig.json`，併爲 `src/components`, `src/lib` 提供別名。”
- 關鍵術語：`strict`, `noImplicitAny`, `paths`, `declaration`, `@types`。

## 避坑指南

- 禁止在代碼中使用 `any`；如不確定類型，使用聯合類型或 `unknown` 並顯式收窄。
- 別名與實際目錄結構必須一致；路徑映射的相對順序會影響解析。
- 更換構建工具時檢查 `module` 與 `moduleResolution` 的兼容性。
