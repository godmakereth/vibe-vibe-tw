---
title: "0.2.4 跨平臺：命令行的“方言”"
typora-root-url: ../public
---

# 0.2.4 跨平臺：命令行的“方言”

### 一句話破題

Windows 和類 Unix 系統（macOS, Linux）的命令行，就像中文的普通話和粵語，核心邏輯相通，但具體“詞彙”（命令）和“語法”（參數）存在差異。理解這些“方言”，是成爲一個能在不同系統上無縫切換的全棧開發者的關鍵。

### 核心價值

1.  **減少困惑**：當你發現一個在教程裏（通常是 Mac 環境）運行正常的命令在你的 Windows 電腦上報錯時，能立刻意識到這是“方言”問題，而不是你做錯了什麼。
2.  **編寫兼容性腳本**：在編寫需要分發給不同系統用戶的腳本時（例如 `package.json` 裏的 `scripts`），你需要知道如何處理這些差異。
3.  **與 AI 高效協作**：在向 AI 請求命令時，明確告知你的操作系統，能讓它直接給出正確的“方言”，避免無效溝通。

### 核心差異對比

現代 Windows 的 PowerShell 已經極大地吸收了 Unix 的優點，併爲許多常用命令提供了別名（Alias），例如 `ls`, `cat`, `pwd`。這大大降低了切換成本。但底層的命令和一些高級用法仍然不同。

以下是一些最根本且常見的差異：

| 任務 | PowerShell (Windows) | Bash/Zsh (macOS/Linux) | 主要差異點 |
| :--- | :--- | :--- | :--- |
| **環境變量** | `ls env:` (查看) <br> `$env:VAR="value"` (設置) | `printenv` (查看) <br> `export VAR="value"` (設置) | 語法和設置方式完全不同。 |
| **查找文件** | `Get-ChildItem -Recurse -Filter "*.js"` | `find . -name "*.js"` | 命令名稱和參數風格迥異。 |
| **查找文本** | `Select-String -Path "*.log" -Pattern "Error"` | `grep "Error" *.log` | `grep` 是 Unix 世界的瑞士軍刀，PowerShell 對應的是 `Select-String`。 |
| **清空屏幕** | `Clear-Host` (別名: `clear`, `cls`) | `clear` | PowerShell 的原生命令更長。 |
| **連接命令** | `;` (或換行) | `;` (或換行) / `&&` / `||` | PowerShell 主要用分號。Unix 的 `&&` (成功後執行) 和 `||` (失敗後執行) 提供了更強的邏輯控制。 |
| **執行腳本** | 默認禁止，需 `Set-ExecutionPolicy` 設置策略 | `chmod +x script.sh` 後 `./script.sh` | Windows 出於安全考慮，對腳本執行有嚴格的策略限制。 |

### 覺知：如何彌合差異？

懂了這些差異，你在 Review AI 生成的代碼或閱讀文檔時，應該重點檢查哪裏？

1.  **檢查 `package.json` 的 `scripts`**：
    *   如果一個腳本里寫着 `NODE_ENV=production node server.js`，你要意識到這在 Windows 的原生 `cmd` 或 `PowerShell` 中是無法直接運行的。你需要 `cross-env` 這樣的工具來抹平差異：`cross-env NODE_ENV=production node server.js`。
    *   AI 在生成 `scripts` 時，可能會忘記這一點。你可以主動提醒它：“請確保這個腳本是跨平臺兼容的，必要時使用 `cross-env`。”

2.  **識別命令的“口音”**：
    *   當你看到 `export` 關鍵字，或 `grep`, `find`, `awk`, `sed` 這些命令時，可以確定這是 Unix “方言”。如果你的主戰場是 Windows，你需要讓 AI “翻譯”成對應的 PowerShell 命令。
    *   反之，看到 `Get-Item`, `Select-String`, `$env:` 等，就是純正的 PowerShell “方言”。

3.  **擁抱現代工具**：
    *   **Windows Terminal** + **PowerShell 7+**: 提供了最好的 Windows 命令行體驗。
    *   **WSL (Windows Subsystem for Linux)**: 讓你可以在 Windows 中直接運行一個完整的 Linux 環境。這是在 Windows 上進行 Web 開發的“終極解決方案”，因爲它從根本上消除了環境差異。
    *   **Docker**: 將你的應用和環境打包成一個容器，無論在哪臺機器上運行，環境都完全一致。這是解決“在我電腦上明明是好的”問題的最有效手段。

### AI 協作指南

*   **核心意圖**：在提問時，**主動聲明你的操作系統**。
*   **需求定義公式**：`“我在 [Windows/macOS] 系統上，我想 [你的目標]。請給我相應的命令行指令。”`

**示例**：

> **Bad ❌**: “怎麼設置環境變量？”
> *AI 只能猜你用的是什麼系統。*
>
> **Good ✅**: “我用的是 Windows 11 和 PowerShell，我想臨時設置一個名爲 `API_KEY` 的環境變量，值爲 `123456`。請問命令是什麼？”

通過理解並尊重這些“方言”，你就能更順暢地在數字世界中穿梭，並更高效地與你的 AI 編程夥伴協作。
