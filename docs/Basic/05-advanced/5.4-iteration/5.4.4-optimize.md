---
title: "5.4.4 代碼優化"
order: 5
---

# 5.4.4 代碼優化：讓 AI 幫你改進代碼質量

經過本節學習，你將掌握：
- 什麼時候該優化代碼
- 讓 AI 幫你做的 5 類優化
- 代碼審查的基本意識

## 什麼時候該優化

先說一個重要原則：

**功能穩定之後再優化，不要邊寫功能邊優化。**

爲什麼？

因爲你還在加功能的時候，代碼會頻繁變動。這時候花時間整理代碼，可能下一個功能又要重新改。

等待辦清單的核心功能都做完、測試通過了，再考慮優化。

優化的目的是：
- 讓代碼更容易讀懂（以後你自己回來看也能看懂）
- 減少潛在的問題
- 讓代碼運行得更快（對於小項目，這通常不是重點）

## 讓 AI 幫你做的 5 類優化

你不需要自己會寫更好的代碼，可以讓 AI 幫你檢查和改進。

### 1. 檢查代碼重複

```
請檢查我的代碼，有沒有重複的邏輯？
如果有，請幫我提取成一個可複用的函數。

[粘貼你的代碼]
```

**爲什麼重要**：重複的代碼意味着，如果要改某個邏輯，你需要改多處。容易漏改，產生 bug。

### 2. 改進變量命名

```
請檢查我的代碼中的變量和函數命名，有沒有不夠清晰的？
請給出改進建議，讓代碼更容易讀懂。

[粘貼你的代碼]
```

**例子**：

| 改進前 | 改進後 | 原因 |
|--------|--------|------|
| `a`, `b`, `x` | `taskName`, `dueDate` | 有意義的名字，一看就知道是什麼 |
| `data` | `todoList` | 更具體 |
| `fn1` | `addNewTask` | 描述了函數的功能 |

### 3. 添加中文註釋

```
請給這段代碼添加中文註釋，解釋：
1. 每個函數是做什麼的
2. 關鍵的代碼塊在處理什麼邏輯
3. 不容易理解的地方

[粘貼你的代碼]
```

**爲什麼重要**：一個月後你再看自己的代碼，沒有註釋的話可能完全看不懂。註釋是寫給未來的自己的。

### 4. 檢查潛在 bug

```
請檢查我的代碼，有沒有潛在的問題或 bug？
特別關注：
1. 可能導致報錯的邊界情況
2. 數據爲空時的處理
3. 用戶輸入的驗證

[粘貼你的代碼]
```

**常見問題舉例**：
- 用戶沒輸入就點了添加按鈕
- 任務列表爲空時的顯示
- 數據格式不對時的處理

### 5. 性能優化建議

```
請檢查我的代碼，有沒有可以優化性能的地方？
我的項目是一個待辦清單，數據量不大（最多幾十條任務）。
請只給出對我這個規模有意義的優化建議。

[粘貼你的代碼]
```

**對於小項目的說明**：對於待辦清單這樣的小項目，性能通常不是問題。不要過度優化。如果 AI 給了很複雜的優化建議，可以先不做。

## 一個完整的代碼審查 Prompt

如果你想讓 AI 做一次全面的代碼審查，可以用這個模板：

```
請幫我審查這段代碼，從以下幾個角度給出改進建議：

1. 代碼結構：有沒有重複的邏輯？可以怎麼簡化？
2. 可讀性：變量命名是否清晰？需要添加註釋嗎？
3. 健壯性：有沒有可能報錯的邊界情況？
4. 安全性：有沒有明顯的安全問題？

請按優先級排序你的建議（先說最重要的），並給出具體的修改方案。

代碼如下：
[粘貼你的代碼]
```

## 代碼審查的基本意識

在 5.3 節我們提到過，AI 生成的代碼並不總是安全的。

根據 Veracode 2025 年的報告，**45% 的 AI 生成代碼未通過安全測試**。

這不是說 AI 不好用，而是說：**你需要對 AI 給的代碼有基本的審查意識**。

### 審查時關注這幾點

| 關注點 | 檢查內容 |
|--------|---------|
| 數據安全 | 代碼裏有沒有暴露敏感信息（密碼、API密鑰） |
| 輸入驗證 | 用戶輸入的數據有沒有做檢查 |
| 錯誤處理 | 出錯時會不會崩潰，有沒有給用戶提示 |
| 功能正確 | AI 實現的邏輯和你的預期是否一致 |

如果看不太懂代碼也沒關係。至少做到：
- **運行測試一下**，看功能是否正常
- **看看關鍵部分**，比如處理用戶輸入的地方
- **有疑問就問 AI**："這段代碼是在做什麼？有沒有問題？"

## 優化不等於重寫

最後一個重要提醒：

**優化是在現有代碼基礎上小步改進，不是推翻重來。**

如果 AI 建議你"用某某框架重寫整個項目"，這通常不是你現在需要做的。

對於學習階段的項目，保持現有的代碼能工作就好。等你做更多項目、積累更多經驗後，自然會知道什麼時候該用更好的方案。

## 本節檢查清單

- [ ] 核心功能穩定後再考慮優化
- [ ] 讓 AI 檢查了代碼重複問題
- [ ] 讓 AI 改進了變量命名
- [ ] 給關鍵代碼添加了中文註釋
- [ ] 對 AI 生成的代碼有了基本的審查意識

::: tip 代碼是給人讀的
寫代碼不只是讓程序能運行。

好的代碼，別人（包括未來的你）能快速讀懂。

註釋和清晰的命名，是對未來自己的善意。
:::

→ [5.4.5 從項目到作品集](./5.4.5-portfolio.md)
