---
title: "A.2 代碼修改類模板"
---

# A.2 代碼修改類模板

本節提供修改現有代碼的 Prompt 模板，包括功能擴展、代碼重構、性能優化和樣式調整。


## 模板一：功能擴展

適用於：在現有代碼基礎上添加新功能

```markdown
## 當前狀態

**項目背景**：[簡述項目是做什麼的]
**技術棧**：[使用的技術]
**要擴展的模塊**：[哪個文件/組件]

## 現有代碼

```[語言]
[粘貼現有代碼]
```

## 擴展需求

**新增功能**：[描述要添加什麼功能]

**功能細節**：
- [細節1]
- [細節2]
- [細節3]

**觸發方式**：[用戶如何觸發這個功能]
**預期結果**：[功能執行後應該發生什麼]

## 約束條件

**必須保持**：
- [現有功能A 不能受影響]
- [現有功能B 要繼續正常工作]

**不要改動**：
- [不要修改的部分1]
- [不要修改的部分2]

## 輸出要求

- [ ] 只輸出修改後的代碼，不需要重複未修改的部分
- [ ] 用註釋標註新增的代碼
- [ ] 說明需要額外安裝的依賴（如有）
```

### 填寫示例：待辦清單添加"撤銷刪除"功能

```markdown
## 當前狀態

**項目背景**：個人待辦清單網頁應用
**技術棧**：React + TypeScript + Tailwind CSS
**要擴展的模塊**：TaskList.tsx 組件

## 現有代碼

```tsx
function TaskList({ tasks, onDelete }) {
  return (
    <ul>
      {tasks.map(task => (
        <li key={task.id}>
          {task.content}
          <button onClick={() => onDelete(task.id)}>刪除</button>
        </li>
      ))}
    </ul>
  );
}
```

## 擴展需求

**新增功能**：刪除任務後顯示"撤銷"提示，3 秒內可恢復

**功能細節**：
- 刪除任務後，底部顯示"已刪除，點擊撤銷"提示
- 提示顯示 3 秒後自動消失
- 點擊"撤銷"按鈕，任務恢復到原位置
- 同時只能有一個撤銷提示

**觸發方式**：用戶點擊刪除按鈕
**預期結果**：任務從列表消失，底部出現撤銷提示

## 約束條件

**必須保持**：
- 現有的任務展示邏輯不變
- 刪除按鈕的位置和樣式不變

**不要改動**：
- 不要改變 props 的類型定義
- 不要引入新的狀態管理庫

## 輸出要求

- [x] 只輸出修改後的代碼
- [x] 用註釋標註新增的代碼
- [ ] 說明需要額外安裝的依賴
```


## 模板二：代碼重構

適用於：改進代碼質量、提高可讀性、統一代碼風格

```markdown
## 重構目標

**當前問題**：[代碼現在有什麼問題]
**期望改進**：[重構後希望達到什麼效果]

## 待重構代碼

```[語言]
[粘貼需要重構的代碼]
```

## 重構要求

**方向**：[可多選]
- [ ] 提高可讀性（變量命名、函數拆分）
- [ ] 減少重複代碼（提取公共函數）
- [ ] 統一代碼風格
- [ ] 添加類型定義（TypeScript）
- [ ] 改進錯誤處理
- [ ] 其他：[具體說明]

**必須保持**：
- 功能行爲完全不變
- [其他約束]

**參考規範**（可選）：
[如果有特定的代碼規範，可以貼在這裏]

## 輸出要求

請提供：
1. 重構後的完整代碼
2. 簡要說明做了哪些改動
3. 改動的理由
```

### 填寫示例：重構重複的表單驗證代碼

```markdown
## 重構目標

**當前問題**：註冊、登錄、修改密碼三個表單都有類似的驗證代碼，複製粘貼了三遍
**期望改進**：提取公共的驗證函數，減少重複

## 待重構代碼

```typescript
// 註冊表單
function validateRegister(data) {
  if (!data.email || !data.email.includes('@')) {
    return '郵箱格式不正確';
  }
  if (!data.password || data.password.length < 8) {
    return '密碼至少8位';
  }
  if (data.password !== data.confirmPassword) {
    return '兩次密碼不一致';
  }
  return null;
}

// 登錄表單
function validateLogin(data) {
  if (!data.email || !data.email.includes('@')) {
    return '郵箱格式不正確';
  }
  if (!data.password || data.password.length < 8) {
    return '密碼至少8位';
  }
  return null;
}

// 修改密碼錶單
function validateChangePassword(data) {
  if (!data.oldPassword || data.oldPassword.length < 8) {
    return '舊密碼至少8位';
  }
  if (!data.newPassword || data.newPassword.length < 8) {
    return '新密碼至少8位';
  }
  if (data.newPassword !== data.confirmPassword) {
    return '兩次密碼不一致';
  }
  return null;
}
```

## 重構要求

**方向**：
- [x] 減少重複代碼（提取公共函數）
- [x] 添加類型定義（TypeScript）
- [x] 改進錯誤處理（支持返回多個錯誤）

**必須保持**：
- 功能行爲完全不變
- 錯誤信息文案保持一致

## 輸出要求

請提供：
1. 重構後的完整代碼
2. 簡要說明做了哪些改動
3. 如何在原有表單中使用新的驗證函數
```


## 模板三：性能優化

適用於：頁面加載慢、操作卡頓、內存佔用高

```markdown
## 性能問題描述

**問題現象**：[具體描述慢在哪裏、卡在哪裏]
**觸發條件**：[什麼情況下會出現這個問題]
**影響程度**：[大概延遲多久、卡頓多久]

## 相關代碼

```[語言]
[粘貼可能導致性能問題的代碼]
```

## 優化目標

**期望效果**：[優化後應該達到什麼程度]
**度量標準**：[如何判斷優化成功]

## 已知信息

**數據規模**：[處理的數據量大概多少]
**運行環境**：[瀏覽器/Node.js/移動端]
**已嘗試的優化**：[如果有的話]

## 約束條件

- 功能邏輯不能改變
- [其他約束]

## 輸出要求

請提供：
1. 優化後的代碼
2. 解釋性能問題的原因
3. 優化的原理和效果預估
```


## 模板四：樣式調整

適用於：UI 美化、佈局修改、響應式適配

```markdown
## 當前樣式

**問題描述**：[當前界面哪裏不滿意]

**當前代碼**：
```[css/html]
[粘貼當前樣式相關代碼]
```

## 期望效果

**描述**：[用文字描述想要的效果]

**參考**（可選）：
- 參考網站：[URL]
- 參考圖片：[描述或鏈接]
- 關鍵詞：[簡潔/現代/圓角/陰影/漸變/...]

## 具體要求

**佈局調整**：
- [調整1]
- [調整2]

**視覺效果**：
- [效果1]
- [效果2]

**響應式**：
- 桌面端（>1024px）：[要求]
- 平板端（768-1024px）：[要求]
- 手機端（<768px）：[要求]

## 技術約束

**使用技術**：[Tailwind CSS/原生 CSS/其他]
**必須兼容**：[瀏覽器版本要求]

## 輸出要求

請提供修改後的樣式代碼，並標註改動的部分。
```


## 模板五：代碼遷移（精簡版）

適用於：升級框架版本、更換技術棧

```markdown
## 遷移需求

**原技術**：[如 React Class 組件]
**目標技術**：[如 React Hooks 函數組件]

## 原代碼

```[語言]
[粘貼需要遷移的代碼]
```

## 遷移要求

- 保持功能完全一致
- 遵循目標技術的最佳實踐
- [其他要求]

## 輸出要求

請提供遷移後的代碼，並說明主要改動點。
```


## 精簡版：快速修改模板

當你只需要做一個小改動時，可以使用這個精簡版：

```markdown
請修改以下代碼：

```[語言]
[代碼]
```

**修改內容**：[簡述要改什麼]

**約束**：
- 保持其他部分不變
- [其他約束]
```


## 常見填寫誤區

| 誤區 | 問題 | 正確做法 |
|-----|------|---------|
| 不貼現有代碼 | AI 無法瞭解上下文 | 貼出相關的代碼片段 |
| 只說"優化一下" | 不知道優化什麼方向 | 明確是可讀性/性能/結構 |
| 忘記說"不要改" | AI 可能重構整個文件 | 明確邊界，哪些不動 |
| 參考描述太抽象 | "好看一點"太模糊 | 給參考網站或具體描述 |


## 本節要點

- ✅ **功能擴展**：貼出現有代碼 + 描述新功能 + 明確不能動的部分
- ✅ **代碼重構**：明確重構方向 + 保證功能不變
- ✅ **性能優化**：描述問題現象 + 給出數據規模 + 設定度量標準
- ✅ **樣式調整**：提供參考 + 具體描述期望效果
