---
title: "3.7.4 實戰演練：綜合練習"
---

# 3.7.4 實戰演練：綜合練習

本節提供四個綜合練習，幫助你內化本章所學技能。建議認真完成每個練習，然後對照參考答案自評。


## 練習一：提示詞改寫

### 任務說明

下面有三個「差提示詞」，請用 S.C.A.F.F. 框架改寫成「好提示詞」。

### 差提示詞 1

```
幫我做一個登錄頁面
```

**你的改寫**：

（請先自己嘗試改寫，再看參考答案）

<details>
<summary>點擊查看參考答案</summary>

```markdown
【Situation - 情境】
我正在開發一個個人博客的管理後臺。
技術棧：Next.js 16 + TypeScript + Tailwind CSS
當前進度：首頁和文章列表頁已完成，現在需要添加登錄功能
設計風格：極簡風格，參考 Notion 的登錄頁面

【Challenge - 挑戰】
實現管理員登錄頁面：
- 表單包含：郵箱輸入框、密碼輸入框、登錄按鈕
- 點擊登錄後，驗證格式（郵箱格式、密碼不爲空）
- 格式錯誤時，在對應輸入框下方顯示紅色提示
- 暫時不需要真正的後端驗證，先做前端界面和交互

【Audience - 受衆】
- 用戶：只有我一個人（博客管理員）
- 代碼維護者：我自己，React 初學者
- 請在關鍵邏輯處添加註釋

【Format - 格式】
請提供：
1. 完整的登錄頁面組件代碼（單文件）
2. 包含 TypeScript 類型定義
3. 樣式使用 Tailwind CSS
4. 文件命名：LoginPage.tsx

【Foundations - 約束】
- 不使用任何 UI 組件庫
- 不使用第三方表單庫
- 狀態管理用 React 原生的 useState
- 響應式設計：移動端和桌面端都要適配
```

**評分標準**：
- ✅ 有項目背景和技術棧（2分）
- ✅ 任務描述具體，有輸入輸出（2分）
- ✅ 說明了受衆和技術水平（1分）
- ✅ 指定了輸出格式（2分）
- ✅ 有明確的約束條件（2分）
- ✅ 使用了框架結構（1分）

滿分 10 分，8 分以上爲優秀。

</details>


### 差提示詞 2

```
幫我分析一下這段代碼有什麼問題
```

**你的改寫**：

<details>
<summary>點擊查看參考答案</summary>

```markdown
【當前代碼】
```typescript
const fetchUsers = async () => {
  const response = await fetch('/api/users');
  const data = response.json();
  setUsers(data);
}
```

【問題現象】
調用這個函數後，users 狀態是一個 Promise 對象而不是數組，導致渲染時報錯。

【期望行爲】
users 應該是從 API 獲取的用戶數組

【請幫我】
1. 指出代碼中的問題
2. 解釋爲什麼會出現這個問題
3. 給出修正後的代碼
4. 說明如何避免類似錯誤

【關於我】
我是 JavaScript 初學者，對 async/await 還不太熟悉
```

**評分標準**：
- ✅ 提供了具體的代碼（2分）
- ✅ 描述了問題現象（2分）
- ✅ 說明了期望行爲（2分）
- ✅ 明確了需要什麼幫助（2分）
- ✅ 說明了自己的技術水平（2分）

滿分 10 分，8 分以上爲優秀。

</details>


### 差提示詞 3

```
我想做個記賬軟件
```

**你的改寫**：

<details>
<summary>點擊查看參考答案</summary>

```markdown
【Situation - 情境】
我想做一個個人記賬網頁應用，幫助自己追蹤日常開銷。
技術棧：React + TypeScript + Tailwind CSS
目標用戶：我自己（月光族，想知道錢花哪了）
設計原則：極簡，記一筆賬不超過 5 秒

【Challenge - 挑戰】
第一版（MVP）實現以下功能：
1. 快速記賬：選擇分類 + 輸入金額 + 可選備註
2. 查看賬單：按日期查看當天的所有記錄
3. 月度彙總：顯示當月總支出和各分類佔比

【Audience - 受衆】
- 用戶：我自己，需要簡單快捷
- 代碼維護者：我自己，有一點 React 基礎

【Format - 格式】
這是第一次對話，請先幫我：
1. 確認這個 MVP 範圍是否合理
2. 建議項目的文件結構
3. 列出需要實現的組件清單

【Foundations - 約束】
- 數據先存在 localStorage，不需要後端
- 分類固定爲：餐飲、交通、購物、娛樂、其他
- 只記支出，不記收入（簡化）
- 不需要用戶登錄

【不做清單】
- 不做多賬本
- 不做預算功能
- 不做數據導出
- 不做圖表可視化（第二版考慮）
```

**評分標準**：
- ✅ 有完整的項目背景（2分）
- ✅ MVP 功能範圍明確（2分）
- ✅ 有「不做清單」（2分）
- ✅ 第一次對話請求合理（規劃而非直接寫代碼）（2分）
- ✅ 約束條件具體（2分）

滿分 10 分，8 分以上爲優秀。

</details>


## 練習二：PRD 編寫實戰

### 任務說明

假設你想做一個「讀書筆記」工具，幫助自己記錄讀書心得。

請整合第二章的思維工具，完成以下內容：

1. 用 JTBD 格式描述用戶任務
2. 用減法思維確定 MVP 範圍（P0/P1/不做）
3. 回答靈魂三問
4. 寫出一份精簡版 PRD

### 你的答案

（請先自己完成，再看參考答案）

<details>
<summary>點擊查看參考答案</summary>

### 1. JTBD 任務描述

> 當我讀完一本書的某個章節時，我想快速記錄關鍵觀點和我的思考，這樣我在需要回顧時能夠快速找到這些筆記，而不是重新翻書。

### 2. MVP 範圍

| 優先級 | 功能 | 原因 |
|-------|------|------|
| **P0** | 創建筆記（書名 + 章節 + 內容） | 核心功能 |
| **P0** | 查看所有筆記列表 | 核心功能 |
| **P0** | 按書名篩選筆記 | 找筆記必須快 |
| **P1** | 編輯已有筆記 | 經常需要修改補充 |
| **P1** | 刪除筆記 | 清理無用筆記 |
| **不做** | 筆記標籤/分類 | 增加複雜度，MVP 不需要 |
| **不做** | 筆記分享 | 個人使用，不需要 |
| **不做** | Markdown 編輯器 | 簡單文本足夠 |
| **不做** | 書籍信息自動獲取 | 手動輸入書名即可 |

### 3. 靈魂三問

| 問題 | 回答 |
|-----|------|
| **用戶是誰？** | 我自己——喜歡讀書但經常忘記書中內容的人 |
| **痛點在哪？** | 讀過的書記不住，需要時找不到當時的思考 |
| **爲什麼做這個？** | 現有工具（Notion、備忘錄）要麼太重，要麼不好按書檢索 |

### 4. 精簡版 PRD

```markdown
# 讀書筆記工具 PRD

## 項目背景

### 問題
我喜歡讀書，但經常讀完就忘。需要回顧時，要麼重新翻書，要麼在各種 app 裏找當時的筆記，很費時間。

### JTBD
當我讀完一本書的某個章節時，我想快速記錄關鍵觀點和我的思考，這樣我在需要回顧時能夠快速找到這些筆記。

## 目標用戶

- 身份：喜歡讀書的個人用戶
- 場景：讀完一章後記錄、需要引用時檢索
- 核心需求：快速記錄 + 快速檢索

## P0 功能

### 功能1：創建筆記
- 必填：書名、筆記內容
- 選填：章節名、頁碼
- 交互：打開頁面直接可以開始寫

### 功能2：查看筆記列表
- 按創建時間倒序顯示
- 每條顯示：書名、章節、內容摘要、時間
- 點擊可查看完整內容

### 功能3：按書名篩選
- 頁面頂部有書名篩選器
- 選擇後只顯示該書的筆記

## 技術方案

- 前端：React + TypeScript + Tailwind CSS
- 數據：localStorage（個人使用，不需要後端）
- 響應式：支持手機和電腦

## 不做清單

- 不做筆記標籤/分類
- 不做筆記分享功能
- 不做 Markdown 編輯器
- 不做書籍封面/信息自動獲取
- 不做多端同步

## 成功標準

自己使用 2 周，記錄至少 10 條筆記，併成功檢索到之前的筆記。
```

**自評標準**：
- ✅ JTBD 描述完整（場景 + 任務 + 價值）
- ✅ MVP 範圍有優先級，有「不做清單」
- ✅ 靈魂三問都能回答
- ✅ PRD 結構完整，AI 能理解執行

</details>


## 練習三：迭代對話模擬

### 任務說明

假設你讓 AI 幫你實現「讀書筆記」的創建功能，AI 給了你以下代碼，但有問題。

請模擬 3 輪迭代對話，逐步修正問題。

### AI 第一次輸出

```typescript
const CreateNote = () => {
  const [bookName, setBookName] = useState('');
  const [content, setContent] = useState('');

  const handleSubmit = () => {
    const note = { bookName, content };
    const notes = JSON.parse(localStorage.getItem('notes'));
    notes.push(note);
    localStorage.setItem('notes', JSON.stringify(notes));
  }

  return (
    <form onSubmit={handleSubmit}>
      <input value={bookName} onChange={e => setBookName(e.target.value)} />
      <textarea value={content} onChange={e => setContent(e.target.value)} />
      <button type="submit">保存</button>
    </form>
  );
}
```

### 問題識別

請找出這段代碼的問題，然後寫出你的反饋。

<details>
<summary>點擊查看問題分析和迭代示例</summary>

### 問題清單

1. **localStorage.getItem 可能返回 null**：第一次使用時會報錯
2. **沒有生成 note id**：後續編輯/刪除需要 id
3. **沒有記錄創建時間**：列表需要按時間排序
4. **表單提交後沒有清空輸入**：用戶體驗差
5. **沒有表單驗證**：空內容也能提交
6. **handleSubmit 沒有阻止默認行爲**：表單會刷新頁面

### 第一輪反饋

```markdown
【問題】
1. localStorage.getItem('notes') 第一次會返回 null，導致 notes.push 報錯
2. handleSubmit 沒有 e.preventDefault()，表單會刷新頁面

【原因】
localStorage 第一次使用時沒有數據，JSON.parse(null) 會出錯

【期望】
1. 處理 localStorage 爲空的情況，初始化爲空數組
2. 阻止表單默認提交行爲
```

### AI 第二次輸出

```typescript
const handleSubmit = (e: React.FormEvent) => {
  e.preventDefault();
  const note = { bookName, content };
  const existingNotes = localStorage.getItem('notes');
  const notes = existingNotes ? JSON.parse(existingNotes) : [];
  notes.push(note);
  localStorage.setItem('notes', JSON.stringify(notes));
}
```

### 第二輪反饋

```markdown
【問題】
1. 筆記沒有 id，後續無法編輯或刪除特定筆記
2. 沒有創建時間，列表無法按時間排序

【期望】
每條筆記需要包含：
- id：使用 Date.now() 或 uuid
- createdAt：創建時間戳
- bookName：書名
- content：內容
```

### AI 第三次輸出

```typescript
const handleSubmit = (e: React.FormEvent) => {
  e.preventDefault();
  const note = {
    id: Date.now().toString(),
    bookName,
    content,
    createdAt: new Date().toISOString()
  };
  const existingNotes = localStorage.getItem('notes');
  const notes = existingNotes ? JSON.parse(existingNotes) : [];
  notes.push(note);
  localStorage.setItem('notes', JSON.stringify(notes));
}
```

### 第三輪反饋

```markdown
【問題】
1. 保存成功後沒有清空輸入框
2. 沒有表單驗證，書名和內容爲空也能提交
3. 沒有保存成功的反饋提示

【期望】
1. 保存成功後清空 bookName 和 content
2. 書名和內容都不能爲空（去除空格後判斷）
3. 保存成功後顯示簡短提示（如 toast）

【示例】
保存成功後：
- 輸入框清空
- 顯示「筆記已保存」提示 2 秒後消失
```

### 最終代碼

```typescript
const CreateNote = () => {
  const [bookName, setBookName] = useState('');
  const [content, setContent] = useState('');
  const [showToast, setShowToast] = useState(false);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    
    // 表單驗證
    if (!bookName.trim() || !content.trim()) {
      return;
    }

    const note = {
      id: Date.now().toString(),
      bookName: bookName.trim(),
      content: content.trim(),
      createdAt: new Date().toISOString()
    };
    
    const existingNotes = localStorage.getItem('notes');
    const notes = existingNotes ? JSON.parse(existingNotes) : [];
    notes.push(note);
    localStorage.setItem('notes', JSON.stringify(notes));
    
    // 清空輸入並顯示提示
    setBookName('');
    setContent('');
    setShowToast(true);
    setTimeout(() => setShowToast(false), 2000);
  }

  return (
    <>
      <form onSubmit={handleSubmit}>
        <input 
          value={bookName} 
          onChange={e => setBookName(e.target.value)}
          placeholder="書名"
        />
        <textarea 
          value={content} 
          onChange={e => setContent(e.target.value)}
          placeholder="筆記內容"
        />
        <button type="submit">保存</button>
      </form>
      {showToast && <div className="toast">筆記已保存</div>}
    </>
  );
}
```

**迭代要點**：
- 每輪只反饋 2-3 個問題，不要一次性列出所有問題
- 反饋格式：問題 + 原因 + 期望
- 重要問題（如報錯）優先處理

</details>


## 練習四：幻覺識別與修正

### 任務說明

假設 AI 給了你以下代碼片段。請識別其中的幻覺問題，並說明如何驗證和修正。

### AI 輸出

```typescript
// AI 推薦使用 super-easy-storage 庫來簡化 localStorage 操作
import { createStore, useStore } from 'super-easy-storage';

const notesStore = createStore('notes', []);

const CreateNote = () => {
  const [notes, setNotes] = useStore(notesStore);
  
  // 使用 array.findLast() 獲取最後一條筆記
  const lastNote = notes.findLast(note => note.bookName === currentBook);
  
  // 使用 React 18 的 useTransition 處理大列表
  const [isPending, startTransition] = useTransition();
  
  const handleSubmit = () => {
    startTransition(() => {
      setNotes([...notes, newNote]);
    });
  }
}
```

### 你的答案

請識別上述代碼中的幻覺問題，並說明驗證方法。

<details>
<summary>點擊查看參考答案</summary>

### 幻覺識別

| 代碼位置 | 問題類型 | 問題描述 | 驗證方法 |
|---------|---------|---------|---------|
| `super-easy-storage` | 🔴 包幻覺 | 這個包可能不存在 | `npm search super-easy-storage` 或訪問 npmjs.com |
| `array.findLast()` | 🟡 API 幻覺 | ES2023 新 API，舊環境不支持 | 查 MDN 文檔確認兼容性 |
| `useTransition` | ✅ 正確 | React 18 確實有這個 Hook | 但需確認項目用的是 React 18 |

### 驗證步驟

**1. 驗證 super-easy-storage 包**

```bash
npm search super-easy-storage
```

結果：沒有找到這個包。這是一個**包幻覺**。

**修正方案**：
- 使用真實存在的庫，如 `zustand` 或 `jotai`
- 或者自己封裝一個簡單的 localStorage hook

**2. 驗證 findLast() API**

訪問 [MDN - Array.findLast()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findLast)

結果：
- ES2023 引入
- Chrome 97+、Firefox 104+、Safari 15.4+
- Node.js 18+

**修正方案**：
```typescript
// 兼容寫法
const lastNote = [...notes].reverse().find(note => note.bookName === currentBook);

// 或添加 polyfill
```

**3. 驗證 useTransition**

訪問 [React 文檔 - useTransition](https://react.dev/reference/react/useTransition)

結果：React 18 確實有這個 Hook。

**需要確認**：
- 項目的 React 版本是否 >= 18
- 當前場景是否真的需要 useTransition（這裏可能是過度優化）

### 修正後的代碼

```typescript
// 使用 zustand 替代不存在的 super-easy-storage
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface NotesState {
  notes: Note[];
  addNote: (note: Note) => void;
}

const useNotesStore = create<NotesState>()(
  persist(
    (set) => ({
      notes: [],
      addNote: (note) => set((state) => ({ 
        notes: [...state.notes, note] 
      })),
    }),
    { name: 'notes-storage' }
  )
);

const CreateNote = () => {
  const { notes, addNote } = useNotesStore();
  
  // 使用兼容寫法替代 findLast
  const lastNote = [...notes]
    .reverse()
    .find(note => note.bookName === currentBook);
  
  const handleSubmit = () => {
    addNote(newNote);
  }
}
```

### 驗證習慣總結

1. **遇到不熟悉的包**：先 npm search 驗證存在性
2. **遇到不熟悉的 API**：查閱 MDN 或官方文檔
3. **遇到新語法**：確認項目環境是否支持
4. **遇到「高級用法」**：先驗證是否真的需要

</details>


## 練習自評表

完成四個練習後，用這個表格自評：

| 練習 | 完成情況 | 主要收穫 | 需要加強的地方 |
|-----|---------|---------|---------------|
| 練習一：提示詞改寫 | □ 完成 □ 部分完成 □ 未完成 | | |
| 練習二：PRD 編寫 | □ 完成 □ 部分完成 □ 未完成 | | |
| 練習三：迭代對話 | □ 完成 □ 部分完成 □ 未完成 | | |
| 練習四：幻覺識別 | □ 完成 □ 部分完成 □ 未完成 | | |


## 本節要點

✓ **提示詞改寫**：用 S.C.A.F.F. 框架把模糊需求轉化爲結構化提示詞

✓ **PRD 編寫**：整合第二章思考成果，形成 AI 能理解的任務書

✓ **迭代對話**：每輪反饋 2-3 個問題，格式爲「問題 + 原因 + 期望」

✓ **幻覺識別**：對不熟悉的包和 API，先驗證再使用


恭喜你完成了第三章的所有學習內容！下一節我們將盤點你學到的技能，併爲第四章的實戰開發做準備。
