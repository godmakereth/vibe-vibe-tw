---
title: "3.6.2 診斷問題：AI 錯在哪裏"
---

# 3.6.2 診斷問題：AI 錯在哪裏

## 經過本節學習，你將掌握

- 使用「三分鐘快速診斷法」定位問題
- 區分「我沒說清楚」和「AI 能力不足」
- 根據問題類型選擇正確的應對策略
- 獲得一個診斷決策樹

## 診斷的核心問題

當 AI 輸出不符合預期時，你首先要回答一個問題：

> **是我沒說清楚，還是 AI 沒做對？**

這個問題的答案，決定了你下一步應該做什麼：
- 如果是你沒說清楚 → 補充上下文，重新描述
- 如果是 AI 沒做對 → 換種問法，或者換個策略

## 三分鐘快速診斷法

在深入分析之前，先用這三步快速排查，能捕獲約 60% 的常見問題：

### 第一步：運行代碼檢查（30 秒）

```bash
# 如果是 JavaScript/TypeScript 項目
npx eslint <文件名>   # 檢查語法和格式問題
npx tsc --noEmit      # 檢查類型錯誤（如果用 TypeScript）
```

**能發現的問題**：
- 語法錯誤（少了括號、拼錯關鍵字）
- 類型不匹配
- 未定義的變量

### 第二步：檢查依賴和 API（60 秒）

對照代碼中的 import 語句，檢查：

- [ ] 引入的包是否存在？（用 3.6.1 中的驗證方法）
- [ ] 調用的方法是否真的存在於該包中？
- [ ] 版本是否匹配？

**能發現的問題**：
- 包幻覺
- API 幻覺
- 版本兼容問題

### 第三步：運行現有測試（90 秒）

如果項目有測試用例：

```bash
npm test           # 或你項目的測試命令
```

**能發現的問題**：
- 行爲變更（原來能跑的功能被改壞了）
- 邏輯錯誤
- 邊界情況處理不當

## 根因分析四象限

如果三分鐘診斷沒有定位到問題，用這個四象限來分析根本原因：

```
                    我說得清楚
                        ↑
          ┌─────────────┼─────────────┐
          │             │             │
          │   AI 出錯   │  補充上下文 │
 簡單任務 │  → 換問法   │  → 重新描述 │  複雜任務
          │             │             │
          ├─────────────┼─────────────┤
          │             │             │
          │  拆分任務   │ 重描述+拆分 │
          │  → 分步做   │  → 降低複雜度│
          │             │             │
          └─────────────┴─────────────┘
                        ↓
                    我沒說清楚
```

### 象限一：簡單任務 + 我說得清楚 → AI 出錯

**特徵**：
- 任務很明確，不應該有歧義
- 你給的信息足夠完整
- 但 AI 的輸出明顯不對

**應對策略**：
- 換一種問法重新描述
- 給出正確示例讓 AI 參考
- 嘗試不同的 AI 工具

**示例**：
```
原提示詞：寫一個判斷閏年的函數

問題：AI 給的邏輯不對

換種問法：
"請寫一個判斷閏年的 JavaScript 函數。
閏年規則：
1. 能被 4 整除且不能被 100 整除，是閏年
2. 能被 400 整除，也是閏年
請嚴格按照這個規則實現。"
```

### 象限二：簡單任務 + 我沒說清楚 → 補充上下文

**特徵**：
- 任務本身不復雜
- 但你假設了 AI 知道某些背景
- AI 按自己的理解做了，和你想的不一樣

**應對策略**：
- 補充項目背景
- 明確技術棧和約束
- 說明你期望的輸出格式

**示例**：
```
原提示詞：寫一個表單驗證

問題：AI 用了你項目沒有的驗證庫

補充上下文：
"我的項目使用 React + Zod 做表單驗證。
請用 Zod 寫一個用戶註冊表單的驗證 schema，包括：
- 郵箱格式驗證
- 密碼至少 8 位
- 確認密碼要一致"
```

### 象限三：複雜任務 + 我說得清楚 → 拆分任務

**特徵**：
- 任務涉及多個步驟或模塊
- 你描述得很清楚
- 但 AI 的輸出質量不穩定，有些對有些錯

**應對策略**：
- 把大任務拆成小任務
- 一次只讓 AI 做一件事
- 分步驟完成後再整合

**示例**：
```
原提示詞（太大）：
"實現一個完整的用戶認證系統，包括註冊、登錄、找回密碼、JWT 令牌管理"

拆分後：
第一輪："先實現用戶註冊功能，只需要郵箱和密碼"
第二輪："現在加上登錄功能，返回 JWT 令牌"
第三輪："加上令牌驗證中間件"
第四輪："最後加上找回密碼功能"
```

### 象限四：複雜任務 + 我沒說清楚 → 重新描述 + 拆分

**特徵**：
- 任務複雜
- 你自己可能也沒完全想清楚
- AI 的輸出和你想的差很遠

**應對策略**：
- 先退一步，理清自己的需求
- 用 3.4 節學的 PRD 方法整理思路
- 然後拆分成小任務逐個完成

**示例**：
```
原提示詞（模糊又複雜）：
"幫我做一個類似 Notion 的筆記應用"

理清需求後：
"我想做一個個人筆記應用，MVP 版本只需要：
1. 創建/編輯/刪除筆記
2. 筆記列表頁
3. 本地存儲

先幫我實現第一個功能：創建和顯示筆記列表。
技術棧：React + localStorage"
```

## 診斷 Prompt：讓 AI 複述理解

在開始任務之前，或者發現問題之後，可以用這個 Prompt 讓 AI 複述它的理解：

```markdown
在繼續之前，請先回答以下問題：

1. **你理解的任務目標是什麼？**
   （用一句話描述）

2. **你計劃使用什麼技術方案？**
   （列出關鍵技術點）

3. **有哪些地方你不確定，需要我澄清？**
   （如果沒有就說"無"）

請先回答這些問題，確認理解一致後再開始寫代碼。
```

**爲什麼這招有效**：
- 提前暴露 AI 的誤解
- 讓你在寫代碼前就發現問題
- 比事後修改成本低得多

## 常見問題的快速定位

| 症狀 | 最可能的原因 | 下一步 |
|-----|-------------|-------|
| 代碼無法運行，報語法錯誤 | AI 生成了不完整的代碼 | 讓 AI 給出完整代碼 |
| 運行時報 "undefined" | 缺少變量定義或異步問題 | 檢查數據流，補充初始化 |
| 功能和描述不符 | AI 誤解了需求 | 用更具體的語言重新描述 |
| 引入了不認識的庫 | AI 過度發揮 | 明確約束，指定只用某些庫 |
| 代碼能跑但結果不對 | 邏輯幻覺 | 用邊界測試驗證，讓 AI 自查 |
| 編譯報類型錯誤 | API 幻覺或版本問題 | 查官方文檔確認 API |
| 改了這裏壞了那裏 | 任務太大，上下文丟失 | 拆分任務，分步進行 |

## 本節要點

✓ **核心問題**：先判斷是「我沒說清楚」還是「AI 沒做對」

✓ **三分鐘診斷**：運行檢查 → 依賴驗證 → 測試運行，捕獲 60% 問題

✓ **四象限分析**：根據任務複雜度 × 描述清晰度，選擇不同策略

✓ **複述技巧**：讓 AI 在動手前先說明理解，提前發現偏差

定位了問題之後，下一節我們來學習具體的修正策略——怎麼讓 AI 把代碼改對。
