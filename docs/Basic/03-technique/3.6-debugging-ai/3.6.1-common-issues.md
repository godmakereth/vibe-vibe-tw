---
title: "3.6.1 AI 常見的\"不聽話\"表現"
---

# 3.6.1 AI 常見的「不聽話」表現

## 經過本節學習，你將掌握

- 識別 AI 輸出問題的六種常見類型
- 理解 AI 幻覺的四種形態及其危害
- 瞭解 2024-2025 年新興的「Slopsquatting」安全威脅
- 獲得一份實用的驗證技巧速查表

## 六種常見問題類型

AI 的「不聽話」表現看似五花八門，但歸納起來主要有六種類型：

| 類型 | 症狀 | 典型案例 |
|-----|------|---------|
| **答非所問** | AI 理解錯了你的意圖 | 你要登錄頁，它給了註冊頁 |
| **過度發揮** | 做了你沒要求的事情 | 你要簡單時鐘，它給了帶時區切換的全功能版 |
| **偷工減料** | 少做了關鍵部分 | 沒有錯誤處理，缺少邊界檢查 |
| **自相矛盾** | 前後邏輯不一致 | 註釋說「返回數組」，代碼實際返回對象 |
| **幻覺** | 編造不存在的內容 | 推薦不存在的庫，調用不存在的 API |
| **死循環** | 反覆犯同一個錯誤 | 你指出問題，它改了，下次又改回去 |

### 類型一：答非所問

**場景**：你讓 AI 做一個「用戶登錄功能」，它卻給了你完整的「用戶註冊 + 登錄 + 找回密碼」三件套。

**爲什麼會這樣**：AI 基於大量訓練數據進行模式匹配，當它看到「登錄」這個詞時，會聯想到常見的用戶認證系統，然後「好心」地給你全套方案。

**識別信號**：
- 輸出的內容比你要的多很多
- 包含了你沒提到的功能模塊
- AI 在解釋時說「我假設你還需要...」

### 類型二：過度發揮

**場景**：你只想要一個顯示當前時間的簡單組件，AI 卻加上了時區選擇、12/24 小時切換、自定義格式等功能。

**爲什麼會這樣**：AI 見過太多「完整」的解決方案，傾向於給出「全面」的實現，即使你只需要最簡單的版本。

**識別信號**：
- 代碼量遠超預期
- 引入了你不認識的第三方庫
- 包含大量你不需要的配置選項

### 類型三：偷工減料

**場景**：AI 給的代碼能跑，但沒有處理「用戶輸入爲空」「網絡請求失敗」等異常情況。

**爲什麼會這樣**：爲了讓代碼看起來簡潔，或者因爲你沒有明確要求，AI 省略了防禦性代碼。

**識別信號**：
- 代碼中沒有 try-catch 或錯誤處理
- 沒有輸入驗證
- 「Happy Path」（理想路徑）能跑，邊界情況會崩

### 類型四：自相矛盾

**場景**：AI 說「這個函數返回用戶列表」，但實際代碼返回的是單個用戶對象。

**爲什麼會這樣**：AI 生成註釋和生成代碼是相對獨立的過程，有時會出現不同步。

**識別信號**：
- 註釋與代碼行爲不符
- 函數名暗示的功能與實際實現不一致
- 前面說的方案和後面的代碼不匹配

### 類型五：幻覺（重點）

這是最危險的問題類型，下面會詳細展開。

### 類型六：死循環

**場景**：你指出代碼有問題，AI 修改後，下一輪又改回了原來的寫法。

**爲什麼會這樣**：
- 對話上下文太長，AI「忘記」了前面的修正
- 你的修正指令不夠明確
- 任務本身超出了 AI 的能力範圍

**識別信號**：
- 同樣的錯誤反覆出現
- AI 的修改越來越「繞」
- 修一個問題引入兩個新問題

## 重點：AI 幻覺的識別與應對

AI 幻覺（Hallucination）是指 AI 生成**看起來正確但實際錯誤**的內容。在編程場景中，這可能導致代碼無法運行，甚至引入安全漏洞。

### 代碼幻覺的四種類型

| 類型 | 表現 | 危害程度 | 示例 |
|------|------|---------|------|
| **包幻覺** | 推薦不存在的 npm/pip 包 | 🔴 高（安全風險） | `npm install super-easy-utils`（包不存在） |
| **API 幻覺** | 編造不存在的函數或方法 | 🟡 中 | 調用 `array.findLast()` 在舊版 JS 中不存在 |
| **邏輯幻覺** | 代碼邏輯與描述不符 | 🟡 中 | 說「返回去重後的數組」，實際沒有去重 |
| **版本幻覺** | 使用已廢棄的語法或 API | 🟡 中 | 使用 React 舊版類組件生命週期 |

### 包幻覺：最危險的幻覺類型

爲什麼包幻覺的危害程度最高？因爲它涉及到**軟件供應鏈安全**。

**真實案例**：2024-2025 年的安全研究發現了一種名爲「Slopsquatting」的攻擊方式：

1. 研究人員測試了 16 種主流 AI 模型，發現它們推薦的包中約 **20% 是不存在的**
2. 更令人擔憂的是，**43% 的幻覺包名會在多次詢問中重複出現**
3. 攻擊者可以註冊這些 AI 經常「幻覺」出的包名，植入惡意代碼
4. 當開發者按 AI 建議安裝這些包時，就會中招

**攻擊鏈條**：
```
AI 幻覺出包名 → 攻擊者註冊該包名 → 植入惡意代碼 → 開發者按 AI 建議安裝 → 系統被入侵
```

**真實威脅**：2025 年 10 月，安全公司發現了名爲「PhantomRaven」的惡意活動，利用這種技術感染了 126 個 npm 包，竊取了開發者的 npm tokens、GitHub 憑證等敏感信息。

### API 幻覺：看起來對但跑不起來

**典型場景**：

```javascript
// AI 生成的代碼
const lastItem = myArray.findLast(item => item.active);
```

問題：`findLast()` 是 ES2023 引入的方法，在舊版瀏覽器或 Node.js 中不可用。AI 可能混淆了不同版本的 API。

**常見的 API 幻覺模式**：
- 混淆不同庫的 API（把 Lodash 的方法當成原生方法）
- 使用已廢棄的 API
- 編造不存在的配置選項

### 邏輯幻覺：代碼能跑但結果不對

**典型場景**：

你讓 AI 寫一個「去重函數」，它給了你：

```javascript
function removeDuplicates(arr) {
  // 去除數組中的重複元素
  return arr.filter((item, index) => arr.indexOf(item) === index);
}
```

代碼看起來沒問題，註釋也對。但如果數組中包含對象，這個方法就失效了，因爲對象比較的是引用而不是值。

### 版本幻覺：用的是「過時」的寫法

**典型場景**：

你讓 AI 用 React 寫一個組件，它給了你類組件寫法：

```javascript
class MyComponent extends React.Component {
  componentWillMount() {
    // ...
  }
}
```

問題：`componentWillMount` 在 React 16.3 後已被廢棄，React 18 中會產生警告。

## 驗證技巧速查表

面對 AI 生成的代碼，用這份清單快速驗證：

### 驗證包是否存在

```bash
# npm 包
npm search <包名>
# 或直接訪問 https://www.npmjs.com/package/<包名>

# Python 包
pip index versions <包名>
# 或直接訪問 https://pypi.org/project/<包名>
```

### 驗證 API 是否正確

1. **查閱官方文檔**：不要只相信 AI 的解釋
2. **檢查兼容性**：使用 [caniuse.com](https://caniuse.com)（前端）或查看庫的版本說明
3. **小範圍測試**：先在獨立環境跑一下，確認能用

### 要求 AI 提供來源

當 AI 推薦了你不熟悉的庫或 API 時，追問：

```
請給出這個庫的官方文檔鏈接。
```

```
這個 API 是在哪個版本引入的？請給出參考來源。
```

如果 AI 無法給出有效鏈接，或者鏈接打開是 404，那很可能是幻覺。

### 驗證邏輯正確性

1. **用邊界情況測試**：空數組、空字符串、null、超大數值
2. **用反例測試**：故意輸入「應該失敗」的數據，看是否正確處理
3. **讓 AI 自己檢查**：
   ```
   請檢查上面的代碼，列出可能的邊界情況和異常情況，以及當前代碼是否正確處理了它們。
   ```

## 本節要點

✓ **六種問題類型**：答非所問、過度發揮、偷工減料、自相矛盾、幻覺、死循環

✓ **四種代碼幻覺**：包幻覺（最危險）、API 幻覺、邏輯幻覺、版本幻覺

✓ **Slopsquatting 威脅**：攻擊者利用 AI 幻覺的包名進行供應鏈攻擊，20% 的 AI 推薦包可能不存在

✓ **驗證習慣**：對 AI 推薦的包和 API，先驗證再使用；對代碼邏輯，用邊界情況測試

識別問題只是第一步。下一節，我們來學習如何快速定位問題的根源。
