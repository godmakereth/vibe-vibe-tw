---
title: "3.5.3 有效反饋的藝術"
---

# 3.5.3 有效反饋的藝術

## 經過本節學習，你將掌握

- 區分有效反饋和無效反饋
- 使用 SBI 框架（情境-行爲-影響）組織反饋
- 根據問題類型選擇合適的反饋粒度
- 獲得一個可直接使用的反饋句式庫

## 反饋決定迭代質量

迭代對話的核心是「反饋-修正」循環。你給的反饋質量，直接決定 AI 的修正質量。

同樣是對一段代碼不滿意：

```
❌ 無效反饋："這不對，重新做"
✅ 有效反饋："handleSubmit 函數缺少錯誤處理，當 API 請求失敗時會導致白屏"
```

第一種反饋，AI 只能猜你不滿意什麼。第二種反饋，AI 能精準定位問題並修復。

## 無效反饋 vs 有效反饋對比

| 無效反饋 | 問題 | 有效反饋 |
|---------|------|---------|
| "這不對" | 不知道哪裏不對 | "第 15 行的條件判斷邏輯有誤，應該用 `&&` 而不是 `||`" |
| "太複雜了" | 不知道怎麼簡化 | "請移除 X 和 Y 功能，只保留核心的 Z 功能" |
| "不夠好" | 不知道好的標準 | "請把函數拆分成更小的單元，每個函數不超過 20 行" |
| "樣式不對" | 不知道期望什麼樣式 | "按鈕顏色改成 #3B82F6，圓角改成 8px" |
| "有 bug" | 不知道 bug 是什麼 | "當輸入超過 100 個字符時，頁面會卡死" |

**規律**：有效反饋 = 具體位置 + 具體問題 + （可選）期望結果

## SBI 反饋框架

SBI 是一個來自管理學的反饋框架，用於給 AI 反饋同樣有效。

### 框架結構

```
S - Situation（情境）：問題出現在哪裏
B - Behavior（行爲）：具體是什麼問題
I - Impact（影響）：這個問題會導致什麼後果
```

### 示例對比

**場景**：AI 生成的表單沒有驗證邏輯

```
❌ 無 SBI：
"表單驗證有問題"

✅ 使用 SBI：
"在 handleSubmit 函數中（S），
 沒有檢查郵箱格式是否正確（B），
 這會導致用戶輸入無效郵箱也能提交成功（I）。
 請添加郵箱格式驗證。"
```

**場景**：AI 生成的代碼性能差

```
❌ 無 SBI：
"代碼太慢了"

✅ 使用 SBI：
"在 renderList 函數中（S），
 每次渲染都會重新創建整個數組（B），
 這會導致列表有 100 項時頁面明顯卡頓（I）。
 請使用 useMemo 優化。"
```

### 簡化版 SBI

對於簡單問題，可以省略 Impact：

```
"在 handleAdd 函數中（S），缺少空輸入檢查（B）。請添加驗證。"
```

## 反饋粒度金字塔

不同類型的問題，需要不同粒度的反饋。

```
        ▲
       ╱ ╲
      ╱   ╲     方向級反饋
     ╱ 方向 ╲    "整體思路需要調整"
    ╱───────╲
   ╱  功能   ╲   功能級反饋
  ╱───────────╲  "這個功能缺少 XX"
 ╱    代碼     ╲  代碼級反饋
╱───────────────╲ "第 15 行應該改成 XX"
```

### 方向級反饋

**使用場景**：AI 的整體思路偏離了你的預期

**特點**：
- 不糾結細節
- 重新描述期望的大方向
- 可能需要推翻重來

**示例**：
```
我需要的不是一個新頁面，而是一個彈窗組件。
請重新實現：用戶點擊按鈕後，彈出一個模態框讓用戶輸入任務。
```

### 功能級反饋

**使用場景**：方向對，但具體功能有缺失或錯誤

**特點**：
- 針對具體功能點
- 保留已有正確的部分
- 增量修改

**示例**：
```
整體功能可以，請補充以下內容：
1. 添加取消按鈕，點擊後關閉彈窗
2. 點擊彈窗外部區域也能關閉
3. 按 ESC 鍵也能關閉
```

### 代碼級反饋

**使用場景**：功能正確，但代碼細節需要調整

**特點**：
- 精確到行號或函數名
- 給出明確的修改指令
- 最小範圍改動

**示例**：
```
請修改以下細節：
1. 第 23 行：把 `var` 改成 `const`
2. handleClose 函數：添加 event.stopPropagation() 防止事件冒泡
3. Modal 組件：添加 aria-label="任務輸入彈窗" 提升可訪問性
```

### 選擇合適的粒度

| 問題類型 | 使用粒度 | 判斷標準 |
|---------|---------|---------|
| AI 理解錯了需求 | 方向級 | 需要推翻重做 |
| 功能缺失/邏輯錯誤 | 功能級 | 保留大部分，增量修改 |
| 代碼風格/細節問題 | 代碼級 | 只需微調 |

## 常見場景的反饋句式庫

### 功能缺失

```markdown
請補充以下功能：
1. [功能描述]
2. [功能描述]
```

```markdown
這個實現缺少 [功能名稱]。
具體需求：[詳細描述]
```

### 邏輯錯誤

```markdown
[函數名/位置] 的邏輯有誤：
- 當前行爲：[描述當前錯誤行爲]
- 期望行爲：[描述正確行爲]
- 請修正。
```

```markdown
在 [場景] 下，[具體問題]。
正確的邏輯應該是：[描述正確邏輯]
```

### 代碼結構優化

```markdown
請優化以下代碼結構：
1. 把 [邏輯描述] 抽成獨立函數
2. 把 [內容] 移到 [位置]
3. [其他結構調整]
```

```markdown
這個函數太長了（當前 [X] 行），請拆分成：
- [函數1]：負責 [職責]
- [函數2]：負責 [職責]
```

### 樣式調整

```markdown
請修改以下樣式：
- [元素]：[屬性] 改成 [值]
- [元素]：[屬性] 改成 [值]
```

```markdown
[組件] 的樣式需要調整：
1. [具體樣式問題]
2. [具體樣式問題]
參考設計：[描述或圖片鏈接]
```

### 邊界情況

```markdown
請處理以下邊界情況：
1. 當 [條件] 時，應該 [行爲]
2. 當 [條件] 時，應該 [行爲]
```

```markdown
當前實現沒有考慮 [邊界情況]。
當 [具體場景] 發生時，會 [問題描述]。
請添加相應的處理邏輯。
```

## 實戰示例：修正一段有問題的代碼

**AI 第一輪輸出的代碼**：
```tsx
function TaskList({ tasks }) {
  return (
    <ul>
      {tasks.map(task => (
        <li onClick={() => deleteTask(task.id)}>
          {task.title}
        </li>
      ))}
    </ul>
  );
}
```

**問題分析**：
1. 缺少 TypeScript 類型
2. map 中缺少 key
3. deleteTask 未定義
4. 點擊整個 li 就刪除，交互不合理

**有效反饋**：
```markdown
請修正以下問題：

1. 類型定義：
   - 添加 Task 接口定義（id: string, title: string）
   - 給 tasks 參數添加類型

2. React 警告：
   - map 中的 li 需要添加 key={task.id}

3. 功能問題：
   - deleteTask 函數未定義，請通過 props 傳入
   - 不要讓整個 li 可點擊刪除，改成：在每個任務後面添加一個刪除按鈕

4. 交互安全：
   - 刪除前添加確認提示
```

## 反饋的注意事項

### 一次不要反饋太多

```
❌ 一次提出 10 個修改點
✅ 一次提出 3-5 個相關的修改點
```

如果問題很多，優先反饋最重要的，分批進行。

### 反饋要具體，但不要過度指定

```
❌ 過度指定："在第 15 行和第 16 行之間插入 const x = 1;"
✅ 適度具體："在 handleSubmit 中添加空值檢查"
```

告訴 AI「做什麼」，而不是「怎麼寫每一行代碼」。

### 說明「爲什麼」有時很有幫助

```
請把 validateInput 函數抽出去。
原因：這個驗證邏輯在其他表單中也會用到，抽成獨立函數便於複用。
```

AI 理解你的意圖後，可能會給出更好的實現。

## 可複製模板：通用反饋模板

```markdown
請修改以下內容：

**問題1**：[位置/上下文]
- 當前情況：[描述問題]
- 期望結果：[描述期望]

**問題2**：[位置/上下文]
- 當前情況：[描述問題]
- 期望結果：[描述期望]

**問題3**：[位置/上下文]
- 當前情況：[描述問題]
- 期望結果：[描述期望]
```

## 本節要點

✓ **有效反饋三要素**：具體位置 + 具體問題 + 期望結果

✓ **SBI 框架**：情境（哪裏）→ 行爲（什麼問題）→ 影響（導致什麼）

✓ **粒度金字塔**：方向級 → 功能級 → 代碼級，根據問題類型選擇

✓ **句式庫**：積累常用的反饋句式，提高溝通效率

✓ **節制原則**：一次 3-5 個修改點，說「做什麼」而非「怎麼寫」

下一節，我們來學習如何管理長對話的上下文，避免 AI「失憶」。
