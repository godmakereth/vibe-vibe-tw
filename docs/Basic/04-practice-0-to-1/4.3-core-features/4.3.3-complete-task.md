---
title: "4.3.3 功能三：標記完成"
order: 4
---

# 4.3.3 功能三：標記完成

> **本步目標**：點擊"完成"按鈕，任務顯示爲已完成狀態；再次點擊可以取消

這是待辦清單的靈魂功能——看着任務一個個被劃掉，成就感滿滿。

## 🎯 我們要實現什麼

用戶的操作流程：

1. 點擊某個任務的"完成"按鈕
2. 該任務顯示爲"已完成"狀態（文字加刪除線，顏色變淡）
3. 再次點擊，任務恢復爲"未完成"狀態
4. 這是一個開關式的切換

## 📝 完整 Prompt

繼續在現有代碼基礎上添加功能：

```
【當前狀態】
添加任務和刪除任務功能都已正常工作。
現在請添加"標記完成"功能。

【需要實現】
當用戶點擊某個任務的"完成"按鈕時：

1. 首次點擊 - 標記爲已完成：
   - 任務文字添加刪除線
   - 文字顏色變成灰色
   - 按鈕文字從"完成"變成"取消"

2. 再次點擊 - 取消完成狀態：
   - 刪除線消失
   - 文字顏色恢復正常
   - 按鈕文字從"取消"變回"完成"

【技術要求】
- 這是一個切換（toggle）效果，可以反覆切換
- 在現有代碼基礎上添加，保持風格一致
- 關鍵邏輯添加中文註釋
```

## ✅ 預期結果

**測試步驟**：
1. 添加一個任務"寫週報"
2. 點擊它的"完成"按鈕
3. 檢查視覺變化：

| 檢查項 | 點擊前 | 點擊後 |
|-------|-------|-------|
| 任務文字 | 正常顯示 | 有刪除線，顏色變灰 |
| 按鈕文字 | "完成" | "取消" |

4. 再次點擊同一個按鈕
5. 檢查是否恢復原狀

## 🔍 檢查點

- [ ] 點擊完成按鈕，任務文字有刪除線
- [ ] 點擊完成按鈕，文字顏色變灰
- [ ] 點擊完成按鈕，按鈕文字變成"取消"
- [ ] 再次點擊，所有效果恢復原狀
- [ ] 標記完成不影響其他任務
- [ ] 已完成的任務仍然可以刪除

## ⚠️ 常見問題排查

### 問題 1：點擊後沒有任何視覺變化

**可能原因**：CSS 樣式沒有正確應用，或者類名添加錯誤。

**修復 Prompt**：
```
點擊完成按鈕後，代碼可能執行了（按鈕文字變了），
但是任務文字沒有添加刪除線，顏色也沒變。
請檢查 CSS 樣式是否正確定義，以及是否正確添加到了任務元素上。
```

### 問題 2：無法取消完成狀態

**修復 Prompt**：
```
標記完成功能只能用一次：
第一次點擊可以標記爲完成，但再次點擊無法取消。
請修復，讓這個按鈕能夠切換狀態（toggle）。
```

### 問題 3：按鈕文字沒有變化

**修復 Prompt**：
```
點擊完成後，任務樣式變了，但按鈕文字一直是"完成"，沒有變成"取消"。
請在切換狀態的同時，也切換按鈕的文字。
```

### 問題 4：點一個任務，其他任務也變了

**修復 Prompt**：
```
點擊任務A的完成按鈕，結果任務B和任務C也被標記爲完成了。
請修復，確保只修改被點擊的那個任務的狀態。
```

## 💡 技術小貼士：狀態切換的"開關燈"思維

"標記完成"功能本質上是一個**狀態切換**，就像開關燈：

| 燈的狀態 | 對應任務狀態 | 按下開關後 |
|---------|------------|-----------|
| 燈滅（關） | 未完成 | 變成開（完成） |
| 燈亮（開） | 已完成 | 變成關（未完成） |

在代碼裏，這通常通過給元素添加或移除一個"已完成"的標記（叫做 class）來實現：

```
點擊前：<div class="task">買牛奶</div>
點擊後：<div class="task completed">買牛奶</div>
                    ↑ 添加了這個標記

再次點擊：<div class="task">買牛奶</div>
                          ↑ 標記被移除
```

CSS 裏預先定義好了 `.completed` 的樣式（刪除線、灰色），所以添加這個標記後，樣式就自動生效了。

這種"通過添加/移除標記來改變樣式"的方式，是前端開發中非常常見的模式。

## 🎉 三大核心功能完成

如果你已經：
- ✅ 添加任務 - 能用
- ✅ 刪除任務 - 能用
- ✅ 標記完成 - 能用

恭喜！你的待辦清單已經具備了最核心的功能。

**現在的狀態**：這是一個"能用"的待辦清單了。你可以：
- 添加今天要做的事情
- 做完一件劃掉一件
- 不需要的任務可以刪除

但你可能對某些細節不太滿意，比如：
- 樣式想再調整一下
- 想讓已完成的任務自動移到底部
- 想添加一個"清空已完成"的按鈕

下一節，我們來學習如何有效地與 AI 溝通這些調整需求。

→ [4.3.4 迭代優化的藝術](./4.3.4-iterate.md)
